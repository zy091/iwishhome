import{E as x,s as st,F as le,u as se,H as Ve,B as xe,I as ot,G as nt,A as rt,m as it,c as ze}from"./elementPlus-4XfGssYs.js";import{s as V,u as ut,B as ct,b as dt,_ as mt}from"./index-DURmTYuj.js";import{x as _t,X as oe,c as I,r as d,j as pt,y as m,P as t,A as o,H as s,ag as _,G as U,J as v,u as h,O as De,a6 as Ue,L as p,I as vt,aq as ft,M as f,z as u}from"./vendor-COQJj1AX.js";import"./supabase-DD2UsJtA.js";const gt=r=>r===0||r===1||r===11,R={async getAllCases(r={}){let i=V.from("case_sharing").select("*",{count:"exact"});if(r.query&&(i=i.or(`title.ilike.%${r.query}%,custom_sharer.ilike.%${r.query}%,custom_department.ilike.%${r.query}%`)),r.category&&r.category!=="all"&&(i=i.eq("category",r.category)),r.startDate&&r.endDate&&(i=i.gte("created_at",r.startDate).lte("created_at",r.endDate)),r.viewType==="my"){const{data:{user:q}}=await V.auth.getUser();q&&(i=i.eq("created_by",q.id))}r.showStatus!==void 0?i=i.eq("is_show",r.showStatus==="true"):i=i.eq("is_show",!0);const g=((r.page||1)-1)*(r.pageSize||10),k=g+(r.pageSize||10)-1,{data:y,error:C,count:P}=await i.order("created_at",{ascending:!1}).range(g,k);if(C)throw C;return{data:y,total:P||0}},async getCase(r){const{data:i,error:g}=await V.from("case_sharing").select("*").eq("id",r).single();if(g)throw g;return i},async createCase(r){const{data:{user:i}}=await V.auth.getUser();if(!i)throw new Error("User not authenticated");const{data:g,error:k}=await V.from("user_profiles").select("full_name, organization_id").eq("user_id",i.id).single();if(k)throw k;const{data:y,error:C}=await V.from("case_sharing").insert({...r,created_by:i.id,created_by_name:g.full_name||i.email,organization_id:g.organization_id}).select().single();if(C)throw C;return y},async updateCase(r,i){const{data:g,error:k}=await V.from("case_sharing").update(i).eq("id",r).select().single();if(k)throw k;return g},async deleteCase(r){const{error:i}=await V.from("case_sharing").delete().eq("id",r);if(i)throw i},async uploadFile(r,i){const g=`${new Date().getTime()}_${r.name}`,k=`${i}/${g}`,{data:y,error:C}=await V.storage.from("materials").upload(k,r);if(C)throw C;const{data:{publicUrl:P}}=V.storage.from("materials").getPublicUrl(k);return{url:P,filename:g}}},ht={class:"layout"},yt={class:"layout-title"},wt={class:"status-tabs"},bt={class:"cases-content"},kt={class:"card-header"},Ct={key:0,class:"header-actions"},Vt={style:{"font-size":"14px",color:"#909399"}},xt={class:"month-info"},zt={key:0,class:"month-item"},Dt={class:"month-text"},Ut={key:1,class:"month-empty"},St={class:"sharer-dept-info"},$t={key:0,class:"sharer-item"},Tt={class:"sharer-text"},At={key:1,class:"dept-item"},Ft={class:"dept-text"},qt={key:2,class:"sharer-dept-empty"},Et={key:2},Bt={class:"dialog-content"},Mt={class:"case-details"},Lt={class:"case-header"},Nt={class:"case-title"},Pt={class:"case-meta"},Yt={class:"meta-item"},jt={class:"meta-item"},Ht={class:"meta-item"},Ot={class:"case-section"},Gt=["innerHTML"],Rt={key:0,class:"case-section"},Jt={class:"attachment-box"},Qt={class:"attachment-name"},Wt={key:1,class:"case-section"},Xt={class:"link-box"},Kt={class:"link-url"},Zt={key:2,class:"case-section"},It={class:"custom-info"},ea={key:0,class:"custom-item"},ta={class:"custom-value"},aa={key:1,class:"custom-item"},la={class:"custom-value"},sa={key:2,class:"custom-item"},oa={class:"custom-value"},na={class:"dialog-footer"},ra={class:"attachment-preview"},ia=["src"],ua=["src"],ca={key:2,class:"attachment-download"},da={class:"dialog-footer"},ma=_t({__name:"CaseSharing",setup(r){const i=oe([{name:"分享分享",path:"/system/case-sharing"}]),g=ut(),k=I(()=>{var a;return((a=g.user)==null?void 0:a.user_id)||""}),y=I(()=>gt(Number(g.roleId))),C=d(!1),P=d([]),q=d(!1),Y=d(!1),c=d(null),ee=d(""),T=d([]),J=d(""),Q=d(!1),W=d("all"),E=d([]),te=d(),B=d(!1),X=d(""),K=d(!1),j=d(""),H=d(""),n=oe({id:"",title:"",content:"",category:"",is_show:!0,attachment_url:"",attachment_name:"",attachment_type:"",link_url:"",custom_month:"",custom_sharer:"",custom_department:""}),Se={title:[{required:!0,message:"请输入分享标题",trigger:"blur"},{min:2,max:100,message:"标题长度应在2到100个字符之间",trigger:"blur"}],category:[{required:!0,message:"请选择分享类型",trigger:"change"}],content:[{required:!1,message:"请输入分享内容",trigger:"blur"},{min:2,max:1e4,message:"内容长度应在8到10000个字符之间",trigger:"blur"}]},ne=[{label:"广告",value:"advertising"},{label:"素材",value:"material"},{label:"日常运营",value:"daily_operation"},{label:"客户案例",value:"customer_case"},{label:"技术分享",value:"technical"},{label:"其他",value:"other"}],A=oe({page:1,pageSize:10,total:0}),Z=d([]),S=d(null),$e=[{text:"最近一周",value:()=>{const a=new Date,e=new Date;return e.setTime(e.getTime()-3600*1e3*24*7),[e,a]}},{text:"最近一个月",value:()=>{const a=new Date,e=new Date;return e.setTime(e.getTime()-3600*1e3*24*30),[e,a]}},{text:"最近三个月",value:()=>{const a=new Date,e=new Date;return e.setTime(e.getTime()-3600*1e3*24*90),[e,a]}}],Te=I(()=>H.value?H.value.startsWith("image/"):!1),Ae=I(()=>H.value?H.value==="application/pdf":!1),Fe=a=>{switch(a){case"advertising":return"primary";case"material":return"success";case"daily_operation":return"warning";case"customer_case":return"danger";case"technical":return"info";case"other":return"";default:return"info"}},re=a=>{switch(a){case"advertising":return"广告";case"material":return"素材";case"daily_operation":return"日常运营";case"customer_case":return"客户分享";case"technical":return"技术分享";case"other":return"其他";default:return a||"未知"}},qe=a=>y.value?!0:a.created_by===k.value,Ee=a=>y.value?!0:a.created_by===k.value,Be=a=>{A.page=a.page,A.pageSize=a.pageSize,M()},M=async()=>{C.value=!0;const a=T.value!=null&&T.value[0]!=null?T.value[0].toDateString():"",e=T.value!=null&&T.value[1]!=null?T.value[1].toDateString():"";try{const z=await R.getAllCases({query:ee.value,startDate:a,endDate:e,page:A.page,pageSize:A.pageSize,category:X.value!==""?X.value:void 0,showStatus:y.value&&J.value!==""?J.value:void 0,viewType:W.value});P.value=z.data,A.total=z.total}catch(z){x.error("搜索分享失败"),console.error("搜索分享失败:",z)}finally{C.value=!1}},Me=async a=>{q.value=!0,c.value=a},Le=a=>{a.attachment_url&&(j.value=a.attachment_url,H.value=ue(a.attachment_name),K.value=!0)},Ne=()=>{var a;(a=c.value)!=null&&a.attachment_url&&(j.value=c.value.attachment_url,H.value=ue(c.value.attachment_name),K.value=!0)},Pe=()=>{j.value&&window.open(j.value,"_blank")},ie=a=>{a&&window.open(a,"_blank")},ue=a=>{if(!a)return"";const e=Ye(a);return["jpg","jpeg","png","gif","webp"].includes(e)?"image/"+e:e==="pdf"?"application/pdf":""},Ye=a=>{if(!a)return"";const e=a.split(".");return e.length>1?e[e.length-1].toLowerCase():""},je=()=>{B.value=!1,Y.value=!0,Object.assign(n,{id:"",title:"",content:"",category:"",is_show:!0,attachment_url:"",attachment_name:"",attachment_type:"",link_url:"",custom_month:"",custom_sharer:"",custom_department:""}),Z.value=[],S.value=null},He=a=>{B.value=!0,Y.value=!0,Object.assign(n,{id:a.id,title:a.title,content:a.content,category:a.category,is_show:a.is_show,attachment_url:a.attachment_url,attachment_name:a.attachment_name,attachment_type:a.attachment_type,link_url:a.link_url,custom_month:a.custom_month,custom_sharer:a.custom_sharer,custom_department:a.custom_department}),Z.value=[],S.value=null},Oe=a=>{E.value=a},Ge=a=>{const e=["application/pdf","application/msword","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/png","image/gif","image/webp"],z=a.raw&&e.includes(a.raw.type),O=a.raw&&a.raw.size/1024/1024<10;if(!z)return x.error("文件类型不支持！"),!1;if(!O)return x.error("文件大小超过 10MB 限制！"),!1;S.value=a.raw,console.log("Selected file:",S.value)},Re=async a=>{if(!a)throw new Error("No file selected");const e=a.name.split(".").pop(),O=`casesharing/${`${Date.now()}-${Math.random().toString(36).substring(2)}.${e}`}`,{data:F,error:L}=await V.storage.from("materials").upload(O,a);if(L)throw L;const{data:G}=V.storage.from("materials").getPublicUrl(F.path);return G.publicUrl},Je=async()=>{te.value&&await te.value.validate(async a=>{if(a){Q.value=!0;try{if(S.value)try{const e=await Re(S.value);n.attachment_url=e,n.attachment_name=S.value.name,n.attachment_type=S.value.type}catch(e){x.error(`文件上传失败: ${e.message||"未知错误"}`),Q.value=!1;return}B.value?(await R.updateCase(n.id,{title:n.title,content:n.content,category:n.category,is_show:n.is_show,attachment_url:n.attachment_url,attachment_name:n.attachment_name,attachment_type:n.attachment_type,link_url:n.link_url,custom_month:n.custom_month,custom_sharer:n.custom_sharer,custom_department:n.custom_department}),x.success("分享已更新")):(await R.createCase({title:n.title,content:n.content,category:n.category,is_show:n.is_show,attachment_url:n.attachment_url,attachment_name:n.attachment_name,attachment_type:n.attachment_type,link_url:n.link_url,custom_month:n.custom_month,custom_sharer:n.custom_sharer,custom_department:n.custom_department}),x.success("分享已创建")),Y.value=!1,M(),Z.value=[],S.value=null}catch(e){x.error(B.value?"更新分享失败":"创建分享失败"),console.error(B.value?"更新分享失败:":"创建分享失败:",e)}finally{Q.value=!1}}})},Qe=async a=>{try{await ze.confirm(`确定要删除 "${a.title}" 这个分享吗？`,"提示",{type:"warning"}),await R.deleteCase(a.id),x.success("删除成功"),M()}catch(e){e!=="cancel"&&(x.error("删除失败"),console.error("删除失败:",e))}},We=async()=>{if(E.value.length!==0)try{await ze.confirm(`确定要删除选中的 ${E.value.length} 个分享吗？此操作不可恢复。`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const a=E.value.map(e=>R.deleteCase(e.id));await Promise.all(a),x.success(`成功删除 ${E.value.length} 个分享`),E.value=[],M()}catch(a){a!=="cancel"&&(console.error("批量删除分享失败:",a),x.error("批量删除失败"))}},Xe=a=>{W.value=a,A.page=1,M()};return pt(()=>{M()}),(a,e)=>{const z=_("el-tab-pane"),O=_("el-tabs"),F=_("el-input"),L=_("el-option"),G=_("el-select"),ce=_("el-date-picker"),w=_("el-button"),Ke=_("el-space"),de=_("el-card"),D=_("el-table-column"),b=_("el-icon"),me=_("el-tag"),Ze=_("el-button-group"),Ie=_("el-empty"),et=_("el-table"),ae=_("el-dialog"),$=_("el-form-item"),tt=_("el-upload"),at=_("el-switch"),lt=ft("loading");return u(),m("div",ht,[t(ct,{breadbcrum:i},null,8,["breadbcrum"]),o("div",yt,[e[19]||(e[19]=o("h1",{class:"title"},"知识分享",-1)),o("div",wt,[t(O,{class:"demo-tabs",modelValue:W.value,"onUpdate:modelValue":e[0]||(e[0]=l=>W.value=l),onTabChange:Xe},{default:s(()=>[t(z,{name:"all",label:"全部分享"}),t(z,{name:"my",label:"我的分享"})]),_:1},8,["modelValue"])])]),t(de,{shadow:"always",style:{"margin-bottom":"20px"}},{default:s(()=>[t(Ke,{alignment:"start",size:30},{default:s(()=>[t(F,{modelValue:ee.value,"onUpdate:modelValue":e[1]||(e[1]=l=>ee.value=l),style:{width:"400px"},placeholder:"搜索标题、分享人、部门（支持模糊搜索）","suffix-icon":h(st),size:"large",clearable:""},null,8,["modelValue","suffix-icon"]),t(G,{modelValue:X.value,"onUpdate:modelValue":e[2]||(e[2]=l=>X.value=l),placeholder:"分享类型",clearable:"",style:{width:"180px"},size:"large"},{default:s(()=>[(u(),m(De,null,Ue(ne,l=>t(L,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t(ce,{modelValue:T.value,"onUpdate:modelValue":e[3]||(e[3]=l=>T.value=l),type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",shortcuts:$e,size:"large"},null,8,["modelValue"]),y.value?(u(),U(G,{key:0,modelValue:J.value,"onUpdate:modelValue":e[4]||(e[4]=l=>J.value=l),placeholder:"选择展示状态",style:{width:"160px"},size:"large",clearable:""},{default:s(()=>[t(L,{label:"显示",value:"true"}),t(L,{label:"隐藏",value:"false"})]),_:1},8,["modelValue"])):v("",!0),t(w,{type:"primary",size:"large",onClick:M},{default:s(()=>e[20]||(e[20]=[p("搜索")])),_:1}),t(w,{type:"success",size:"large",onClick:je},{default:s(()=>e[21]||(e[21]=[p("添加分享")])),_:1})]),_:1})]),_:1}),o("div",bt,[t(de,{style:{"min-height":"400px"}},{header:s(()=>[o("div",kt,[e[23]||(e[23]=p(" 分享列表 ")),y.value?(u(),m("div",Ct,[t(w,{type:"danger",disabled:!E.value.length,onClick:We},{default:s(()=>e[22]||(e[22]=[p(" 批量删除 ")])),_:1},8,["disabled"]),o("div",Vt,"共计"+f(A.total)+"条数据",1)])):v("",!0)])]),default:s(()=>[vt((u(),U(et,{data:P.value,onSelectionChange:Oe,"scrollbar-always-on":!0,style:{width:"100%"}},{default:s(()=>[y.value?(u(),U(D,{key:0,type:"selection",width:"55",fixed:"left"})):v("",!0),t(D,{label:"分享月份",width:"120"},{default:s(({row:l})=>[o("div",xt,[l.custom_month?(u(),m("div",zt,[t(b,{color:"#E6A23C",size:"14"},{default:s(()=>[t(h(le))]),_:1}),o("span",Dt,f(l.custom_month),1)])):(u(),m("div",Ut,e[24]||(e[24]=[o("span",{class:"empty-text"},"-",-1)])))])]),_:1}),t(D,{prop:"title",label:"标题","min-width":"200"}),t(D,{label:"分享人/部门","min-width":"150"},{default:s(({row:l})=>[o("div",St,[l.custom_sharer?(u(),m("div",$t,[t(b,{color:"#67C23A",size:"14"},{default:s(()=>[t(h(se))]),_:1}),o("span",Tt,f(l.custom_sharer),1)])):v("",!0),l.custom_department?(u(),m("div",At,[t(b,{color:"#F56C6C",size:"14"},{default:s(()=>[t(h(Ve))]),_:1}),o("span",Ft,f(l.custom_department),1)])):v("",!0),!l.custom_sharer&&!l.custom_department?(u(),m("div",qt,e[25]||(e[25]=[o("span",{class:"empty-text"},"-",-1)]))):v("",!0)])]),_:1}),t(D,{prop:"category",label:"类型",width:"100"},{default:s(({row:l})=>[t(me,{type:Fe(l.category),size:"large"},{default:s(()=>[p(f(re(l.category)),1)]),_:2},1032,["type"])]),_:1}),t(D,{label:"附件/链接",width:"100"},{default:s(({row:l})=>[l.attachment_url?(u(),U(w,{key:0,type:"primary",link:"",onClick:N=>Le(l)},{default:s(()=>[t(b,{color:"#409EFF",size:"18"},{default:s(()=>[t(h(xe))]),_:1})]),_:2},1032,["onClick"])):l.link_url?(u(),U(w,{key:1,type:"primary",link:"",onClick:N=>ie(l.link_url)},{default:s(()=>[t(b,{color:"#67C23A",size:"18"},{default:s(()=>[t(h(ot))]),_:1})]),_:2},1032,["onClick"])):(u(),m("span",Et,"-"))]),_:1}),y.value?(u(),U(D,{key:1,prop:"is_show",label:"展示状态",width:"80"},{default:s(({row:l})=>[t(me,{type:l.is_show?"success":"danger",size:"large"},{default:s(()=>[p(f(l.is_show?"显示":"隐藏"),1)]),_:2},1032,["type"])]),_:1})):v("",!0),t(D,{prop:"created_at",label:"创建时间",width:"150"},{default:s(({row:l})=>[p(f(new Date(l.created_at).toLocaleString()),1)]),_:1}),y.value?(u(),U(D,{key:2,prop:"created_by_name",label:"创建人",width:"80"})):v("",!0),t(D,{label:"操作",width:"230",fixed:"right"},{default:s(({row:l})=>[t(Ze,null,{default:s(()=>[t(w,{type:"primary",onClick:N=>Me(l)},{default:s(()=>e[26]||(e[26]=[p("查看")])),_:2},1032,["onClick"]),qe(l)?(u(),U(w,{key:0,type:"warning",onClick:N=>He(l)},{default:s(()=>e[27]||(e[27]=[p("编辑")])),_:2},1032,["onClick"])):v("",!0),Ee(l)?(u(),U(w,{key:1,type:"danger",onClick:N=>Qe(l)},{default:s(()=>e[28]||(e[28]=[p("删除")])),_:2},1032,["onClick"])):v("",!0)]),_:2},1024)]),_:1}),t(Ie,null,{description:s(()=>e[29]||(e[29]=[p(" 暂无分享数据 ")])),_:1})]),_:1},8,["data"])),[[lt,C.value]])]),_:1}),t(dt,{pagination:A,"onUpdate:pagination":Be},null,8,["pagination"]),t(ae,{title:"分享详情",modelValue:q.value,"onUpdate:modelValue":e[7]||(e[7]=l=>q.value=l),width:"60%","close-on-click-modal":!1,top:"5vh",class:"case-detail-dialog"},{footer:s(()=>[o("span",na,[t(w,{onClick:e[6]||(e[6]=l=>q.value=!1)},{default:s(()=>e[40]||(e[40]=[p("关闭")])),_:1})])]),default:s(()=>{var l,N,_e,pe,ve,fe,ge,he,ye,we,be,ke,Ce;return[o("div",Bt,[o("div",Mt,[o("div",Lt,[o("h2",Nt,f(((l=c.value)==null?void 0:l.title)||"无标题"),1),o("div",Pt,[o("span",Yt,[t(b,null,{default:s(()=>[t(h(se))]),_:1}),o("span",null,f(((N=c.value)==null?void 0:N.created_by_name)||"未知用户"),1)]),o("span",jt,[t(b,null,{default:s(()=>[t(h(le))]),_:1}),o("span",null,f(c.value?new Date((_e=c.value)==null?void 0:_e.created_at).toLocaleString():"未知时间"),1)]),o("span",Ht,[t(b,null,{default:s(()=>[t(h(nt))]),_:1}),o("span",null,f(re(((pe=c.value)==null?void 0:pe.category)||"")),1)])])]),o("div",Ot,[e[30]||(e[30]=o("div",{class:"section-title"},"内容",-1)),o("div",{class:"case-content",style:{padding:"10px"},innerHTML:((ve=c.value)==null?void 0:ve.content)||"无内容"},null,8,Gt)]),(fe=c.value)!=null&&fe.attachment_url?(u(),m("div",Rt,[e[32]||(e[32]=o("div",{class:"section-title"},"附件",-1)),o("div",Jt,[t(b,{color:"#409EFF",size:"16"},{default:s(()=>[t(h(xe))]),_:1}),o("span",Qt,f(c.value.attachment_name),1),t(w,{type:"primary",size:"small",onClick:Ne},{default:s(()=>e[31]||(e[31]=[p("查看附件")])),_:1})])])):v("",!0),(ge=c.value)!=null&&ge.link_url?(u(),m("div",Wt,[e[35]||(e[35]=o("div",{class:"section-title"},"相关链接",-1)),o("div",Xt,[t(b,{color:"#67C23A",size:"16"},{default:s(()=>e[33]||(e[33]=[o("link",null,null,-1)])),_:1}),o("span",Kt,f(c.value.link_url),1),t(w,{type:"success",size:"small",onClick:e[5]||(e[5]=_a=>ie(c.value.link_url))},{default:s(()=>e[34]||(e[34]=[p("打开链接")])),_:1})])])):v("",!0),(he=c.value)!=null&&he.custom_month||(ye=c.value)!=null&&ye.custom_sharer||(we=c.value)!=null&&we.custom_department?(u(),m("div",Zt,[e[39]||(e[39]=o("div",{class:"section-title"},"分享信息",-1)),o("div",It,[(be=c.value)!=null&&be.custom_month?(u(),m("div",ea,[t(b,{color:"#E6A23C",size:"16"},{default:s(()=>[t(h(le))]),_:1}),e[36]||(e[36]=o("span",{class:"custom-label"},"月份：",-1)),o("span",ta,f(c.value.custom_month),1)])):v("",!0),(ke=c.value)!=null&&ke.custom_sharer?(u(),m("div",aa,[t(b,{color:"#67C23A",size:"16"},{default:s(()=>[t(h(se))]),_:1}),e[37]||(e[37]=o("span",{class:"custom-label"},"分享人：",-1)),o("span",la,f(c.value.custom_sharer),1)])):v("",!0),(Ce=c.value)!=null&&Ce.custom_department?(u(),m("div",sa,[t(b,{color:"#F56C6C",size:"16"},{default:s(()=>[t(h(Ve))]),_:1}),e[38]||(e[38]=o("span",{class:"custom-label"},"部门：",-1)),o("span",oa,f(c.value.custom_department),1)])):v("",!0)])])):v("",!0)])])]}),_:1},8,["modelValue"]),t(ae,{modelValue:K.value,"onUpdate:modelValue":e[8]||(e[8]=l=>K.value=l),title:"附件预览",width:"80%","destroy-on-close":""},{default:s(()=>[o("div",ra,[Te.value?(u(),m("img",{key:0,src:j.value,class:"attachment-image"},null,8,ia)):Ae.value?(u(),m("iframe",{key:1,src:j.value,class:"attachment-frame"},null,8,ua)):(u(),m("div",ca,[e[42]||(e[42]=o("p",null,"无法预览此类型的文件，请下载后查看",-1)),t(w,{type:"primary",onClick:Pe},{default:s(()=>e[41]||(e[41]=[p("下载附件")])),_:1})]))])]),_:1},8,["modelValue"]),t(ae,{title:B.value?"编辑分享":"知识分享",modelValue:Y.value,"onUpdate:modelValue":e[18]||(e[18]=l=>Y.value=l),width:"50%","close-on-click-modal":!1},{footer:s(()=>[o("span",da,[t(w,{onClick:e[17]||(e[17]=l=>Y.value=!1)},{default:s(()=>e[45]||(e[45]=[p("取消")])),_:1}),t(w,{type:"primary",onClick:Je,loading:Q.value},{default:s(()=>[p(f(B.value?"更新":"创建"),1)]),_:1},8,["loading"])])]),default:s(()=>[t(h(rt),{model:n,rules:Se,ref_key:"caseForm",ref:te,"label-width":"80px",style:{"max-width":"800px"}},{default:s(()=>[t($,{label:"标题",prop:"title"},{default:s(()=>[t(F,{modelValue:n.title,"onUpdate:modelValue":e[9]||(e[9]=l=>n.title=l),placeholder:"请输入分享标题"},null,8,["modelValue"])]),_:1}),t($,{label:"类型",prop:"category"},{default:s(()=>[t(G,{modelValue:n.category,"onUpdate:modelValue":e[10]||(e[10]=l=>n.category=l),placeholder:"选择分享类型",style:{width:"100%"}},{default:s(()=>[(u(),m(De,null,Ue(ne,l=>t(L,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t($,{label:"内容",prop:"content"},{default:s(()=>[t(F,{type:"textarea",modelValue:n.content,"onUpdate:modelValue":e[11]||(e[11]=l=>n.content=l),rows:10,placeholder:"请输入分享内容"},null,8,["modelValue"])]),_:1}),t($,{label:"附件"},{default:s(()=>[t(tt,{class:"upload-box","auto-upload":!1,"on-change":Ge,"file-list":Z.value,limit:1,drag:"",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15",multiple:""},{tip:s(()=>e[43]||(e[43]=[o("div",{class:"el-upload__tip"}," 支持 .pdf, .doc, .docx, .xls, .xlsx, 图片等格式文件，不超过10MB ",-1)])),default:s(()=>[t(b,{class:"el-icon--upload"},{default:s(()=>[t(h(it))]),_:1}),e[44]||(e[44]=o("div",{class:"el-upload__text"},[p(" 拖拽文件或"),o("em",null,"点击上传")],-1))]),_:1},8,["file-list"])]),_:1}),t($,{label:"链接"},{default:s(()=>[t(F,{modelValue:n.link_url,"onUpdate:modelValue":e[12]||(e[12]=l=>n.link_url=l),placeholder:"请输入相关链接（可选）"},null,8,["modelValue"])]),_:1}),t($,{label:"分享月份"},{default:s(()=>[t(ce,{modelValue:n.custom_month,"onUpdate:modelValue":e[13]||(e[13]=l=>n.custom_month=l),type:"month",placeholder:"选择月份（可选）",format:"YYYY年MM月","value-format":"YYYY年MM月",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t($,{label:"分享人"},{default:s(()=>[t(F,{modelValue:n.custom_sharer,"onUpdate:modelValue":e[14]||(e[14]=l=>n.custom_sharer=l),placeholder:"请输入自定义分享人（可选）"},null,8,["modelValue"])]),_:1}),t($,{label:"分享部门"},{default:s(()=>[t(F,{modelValue:n.custom_department,"onUpdate:modelValue":e[15]||(e[15]=l=>n.custom_department=l),placeholder:"请输入分享部门（可选）"},null,8,["modelValue"])]),_:1}),y.value?(u(),U($,{key:0,label:"状态"},{default:s(()=>[t(at,{modelValue:n.is_show,"onUpdate:modelValue":e[16]||(e[16]=l=>n.is_show=l),"active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})):v("",!0)]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])])}}}),ha=mt(ma,[["__scopeId","data-v-bebf6724"]]);export{ha as default};
