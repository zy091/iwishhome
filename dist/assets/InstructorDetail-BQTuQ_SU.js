import{x as S,r as f,ax as $,j,I as G,aq as H,y as u,P as e,J as x,H as a,ag as v,A as t,M as o,L as _,O as k,a6 as w,G as C,u as i,ay as J,z as d}from"./vendor-kUynFKsh.js";import{s as D,b as O}from"./index-BID3odBW.js";import{E as I,e as P,w as N,x as T,W as U,X as W,u as X,N as K,r as Q}from"./elementPlus-BSeP1oVM.js";import"./supabase-CBzAt1Op.js";const Y={class:"instructor-detail"},Z={key:0,class:"detail-container"},tt={class:"instructor-header"},st=["src","alt"],et={class:"header-info"},at={class:"name-section"},ot={class:"title-dept"},lt={class:"specialties-section"},nt={class:"stats-row"},rt={class:"stat-box"},ct={class:"stat-value"},it={class:"stat-box"},dt={class:"stat-value"},ut={class:"stat-box"},_t={class:"stat-value"},vt={class:"stat-box"},pt={class:"stat-value"},ft={class:"card-header"},ht={class:"introduction-text"},mt={class:"card-header"},gt={class:"contact-info"},yt={class:"contact-item"},bt={class:"value"},xt={class:"contact-item"},kt={class:"value"},wt={class:"card-header"},Ct={key:0,class:"courses-list"},Dt={class:"course-header"},It={class:"course-desc"},Nt={class:"course-meta"},Bt={key:0},zt=S({__name:"InstructorDetail",setup(At){const B=J(),z=$(),h=f(!1),l=f(null),m=f([]),b=f(Number(z.params.id)),A=async()=>{h.value=!0;try{const{data:n,error:s}=await D.from("instructors").select("*").eq("id",b.value).single();if(s)throw s;l.value=n}catch(n){I.error("获取讲师详情失败："+n.message)}finally{h.value=!1}},E=async()=>{try{const{data:n,error:s}=await D.from("instructor_courses").select("*").eq("instructor_id",b.value).order("start_date",{ascending:!1});if(s)throw s;m.value=n||[]}catch(n){I.error("获取课程列表失败："+n.message)}},F=()=>{B.back()},V=n=>{const s=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399"],g=n.charCodeAt(0)%s.length;return`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=${s[g].substring(1)}&color=fff&size=400`},q=n=>n?new Date(n).toLocaleDateString("zh-CN"):"";return j(()=>{A(),E()}),(n,s)=>{const g=v("el-page-header"),y=v("el-tag"),p=v("el-card"),c=v("el-icon"),L=v("el-empty"),M=H("loading");return G((d(),u("div",Y,[e(g,{onBack:F,title:"返回列表"},{content:a(()=>s[0]||(s[0]=[t("span",{class:"page-title"},"讲师详情",-1)])),_:1}),l.value?(d(),u("div",Z,[e(p,{class:"info-card",shadow:"hover"},{default:a(()=>[t("div",tt,[t("img",{src:l.value.avatar_url||V(l.value.name),alt:l.value.name,class:"large-avatar"},null,8,st),t("div",et,[t("div",at,[t("h1",null,o(l.value.name),1),e(y,{type:l.value.is_active?"success":"info",size:"large"},{default:a(()=>[_(o(l.value.is_active?"在职":"离职"),1)]),_:1},8,["type"])]),t("p",ot,o(l.value.title)+" · "+o(l.value.department),1),t("div",lt,[(d(!0),u(k,null,w(l.value.specialties,(r,R)=>(d(),C(y,{key:R,type:"primary",effect:"plain",size:"large"},{default:a(()=>[_(o(r),1)]),_:2},1024))),128))]),t("div",nt,[t("div",rt,[t("div",ct,o(l.value.total_courses),1),s[1]||(s[1]=t("div",{class:"stat-label"},"授课数",-1))]),t("div",it,[t("div",dt,o(l.value.total_students),1),s[2]||(s[2]=t("div",{class:"stat-label"},"学员数",-1))]),t("div",ut,[t("div",_t,o(l.value.rating),1),s[3]||(s[3]=t("div",{class:"stat-label"},"评分",-1))]),t("div",vt,[t("div",pt,o(l.value.teaching_experience)+"年",1),s[4]||(s[4]=t("div",{class:"stat-label"},"教学经验",-1))])])])])]),_:1}),e(p,{class:"intro-card",shadow:"hover"},{header:a(()=>[t("div",ft,[e(c,null,{default:a(()=>[e(i(P))]),_:1}),s[5]||(s[5]=t("span",null,"个人简介",-1))])]),default:a(()=>[t("p",ht,o(l.value.introduction),1)]),_:1}),e(p,{class:"contact-card",shadow:"hover"},{header:a(()=>[t("div",mt,[e(c,null,{default:a(()=>[e(i(N))]),_:1}),s[6]||(s[6]=t("span",null,"联系方式",-1))])]),default:a(()=>[t("div",gt,[t("div",yt,[e(c,null,{default:a(()=>[e(i(N))]),_:1}),s[7]||(s[7]=t("span",{class:"label"},"邮箱：",-1)),t("span",bt,o(l.value.email),1)]),t("div",xt,[e(c,null,{default:a(()=>[e(i(T))]),_:1}),s[8]||(s[8]=t("span",{class:"label"},"电话：",-1)),t("span",kt,o(l.value.phone),1)])])]),_:1}),e(p,{class:"courses-card",shadow:"hover"},{header:a(()=>[t("div",wt,[e(c,null,{default:a(()=>[e(i(Q))]),_:1}),s[9]||(s[9]=t("span",null,"授课课程",-1))])]),default:a(()=>[m.value.length>0?(d(),u("div",Ct,[(d(!0),u(k,null,w(m.value,r=>(d(),u("div",{key:r.id,class:"course-item"},[t("div",Dt,[t("h3",null,o(r.course_name),1),e(y,{type:r.is_active?"success":"info"},{default:a(()=>[_(o(r.is_active?"进行中":"已结束"),1)]),_:2},1032,["type"])]),t("p",It,o(r.course_description),1),t("div",Nt,[t("span",null,[e(c,null,{default:a(()=>[e(i(U))]),_:1}),_(" "+o(r.course_category),1)]),t("span",null,[e(c,null,{default:a(()=>[e(i(W))]),_:1}),_(" "+o(r.duration_hours)+"小时",1)]),t("span",null,[e(c,null,{default:a(()=>[e(i(X))]),_:1}),_(" "+o(r.student_count)+"人",1)]),r.start_date?(d(),u("span",Bt,[e(c,null,{default:a(()=>[e(i(K))]),_:1}),_(" "+o(q(r.start_date)),1)])):x("",!0)])]))),128))])):(d(),C(L,{key:1,description:"暂无课程数据"}))]),_:1})])):x("",!0)])),[[M,h.value]])}}}),Lt=O(zt,[["__scopeId","data-v-d4f57b25"]]);export{Lt as default};
