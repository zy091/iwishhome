import{E as w,k as N}from"./elementPlus-Dv7g5dxn.js";import{x as S,r as t,aF as b,j as B,G as C,H as n,ag as l,P as u,A as m,M as I,u as A,az as D,z as M}from"./vendor-COQJj1AX.js";import{D as z}from"./DynamicForm-D3vZtXMK.js";import{s as E}from"./index-02dAV7KX.js";import"./testResultService-CV4QQR0c.js";import"./supabase-BNvKcJjS.js";const F={class:"subtitle"},T=S({__name:"ComprehensiveTest",setup(R){var r,c,p,i;const s=t([]),o=b(),_=D(),d=t(((r=o.query.testId)==null?void 0:r.toString())||"comprehensive-test"),f=t(((c=o.query.testName)==null?void 0:c.toString())||"未命名测试"),g=t((p=o.query.platform)==null?void 0:p.toString()),h=t((i=o.query.chapter)==null?void 0:i.toString()),v=()=>{_.back()},y=async()=>{const{data:a,error:e}=await E.rpc("get_comprehensive_questions",{p_platform:g.value,p_chapter:h.value});e?w.error(`获取问题时出错:${e}, 请检查网络连接或联系管理员`):(s.value=a,console.log(s.value))};B(()=>{y()});const q=async a=>{console.log("用户答案:",a.answers)};return(a,e)=>{const x=l("el-page-header"),k=l("el-card");return M(),C(k,{style:{"min-height":"400px","margin-top":"30px",padding:"0 20px"}},{default:n(()=>[u(x,{onBack:v,icon:A(N)},{content:n(()=>e[0]||(e[0]=[m("span",{class:"text-large font-600 mr-3"}," 综合测验 ",-1)])),default:n(()=>[m("div",F,"共"+I(s.value.length)+"道题目，包含选择题和案例分析题，满分100分。",1)]),_:1},8,["icon"]),u(z,{questions:s.value,testId:d.value,testName:f.value,type:"comprehensive",onSubmitAnswers:q},null,8,["questions","testId","testName"])]),_:1})}}});export{T as default};
