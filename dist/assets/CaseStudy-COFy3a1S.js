import{d as C,r as e,H as I,o as R,c as D,w as r,s as M,M as m,b as d,a as _,e as g,t as f,g as A,N as L,i as T,j as V}from"./index-BmUZ9zWv.js";import{D as j}from"./DynamicForm-DBtOnk5F.js";import"./testResultService-zRfHSjei.js";const E={class:"subtitle"},z=C({__name:"CaseStudy",setup(F){var c,u,l,i,p;const t=e([]),s=I(),n=T(),y=e(((c=s.query.testId)==null?void 0:c.toString())||"case-study-test"),h=e(((u=s.query.testName)==null?void 0:u.toString())||"未命名测试"),v=e((l=s.query.platform)==null?void 0:l.toString()),q=e((i=s.query.chapter)==null?void 0:i.toString()),b=e(((p=s.query.type)==null?void 0:p.toString())||"case"),S=()=>{n.back()},k=async()=>{const{data:o,error:a}=await M.rpc("get_limited_google_questions",{p_question_type:"reading",p_platform:v.value,p_chapter:q.value});a?m.error(`获取问题时出错:${a}, 请检查网络连接或联系管理员`):(t.value=o,console.log(t.value))};R(()=>{k()});const w=async o=>{console.log("用户答案:",o.answers),m.success("提交成功!"),setTimeout(()=>{n.back()},1500)},x=()=>{setTimeout(()=>{n.back()},1500)};return(o,a)=>{const N=d("el-page-header"),B=d("el-card");return V(),D(B,{style:{"min-height":"400px","margin-top":"30px",padding:"0 20px"}},{default:r(()=>[_(N,{onBack:S,icon:A(L)},{content:r(()=>a[0]||(a[0]=[g("span",{class:"text-large font-600 mr-3"}," 案例分析题 ",-1)])),default:r(()=>[g("div",E,"共"+f(t.value.length)+"道案例分析题，每题10分，满分"+f(t.value.length*10)+"分。",1)]),_:1},8,["icon"]),_(j,{questions:t.value,testId:y.value,testName:h.value,type:b.value,onSubmitAnswers:w,onLimitReached:x},null,8,["questions","testId","testName","type"])]),_:1})}}});export{z as default};
