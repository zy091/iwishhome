import{H as S}from"./Header-DJuuJCOm.js";import{x as M,r as g,ax as V,w as I,c as B,j as R,y as h,P as o,ag as s,H as n,A as m,O as A,a6 as D,G as x,K as E,M as H,z as i,aF as N}from"./vendor-kUynFKsh.js";import{u as z,s as F,b}from"./index-BID3odBW.js";import{T as L,u as w,E as y}from"./elementPlus-BSeP1oVM.js";import"./supabase-CBzAt1Op.js";const U={class:"aside-container"},$=M({__name:"InstructorAside",setup(k){const p=V(),a=z(),c=g(p.path),u=g([]);I(()=>p.path,e=>{c.value=e}),I(()=>a.roleId,e=>{console.log("roleId 变化:",e)});const f=e=>({User:w,Setting:L})[e]||w,v=e=>{const t=a.roleId;if(!e||e.length===0)return!0;if(t!=null){const r=Number(t);return e.includes(r)}return!1},l=B(()=>(!a.roleId&&a.roleId!==0&&a.loadRoleId(),u.value.filter(t=>{const r=t.is_visible,d=v(t.required_role_ids);return r&&d}).sort((t,r)=>t.sort_order-r.sort_order))),C=async()=>{try{const{data:e,error:t}=await F.from("menu_instructor").select("*").eq("is_visible",!0).order("sort_order",{ascending:!0});if(t){y.error("获取菜单数据失败");return}u.value=e||[]}catch{y.error("获取菜单数据异常")}};return R(()=>{a.loadRoleId(),C()}),(e,t)=>{const r=s("el-icon"),d=s("el-menu-item"),P=s("el-menu");return i(),h("div",U,[o(P,{"default-active":c.value,class:"el-menu-vertical-demo","active-text-color":"#fff","background-color":"#05479a","text-color":"#fff",style:{position:"fixed","z-index":"999",height:"calc(100vh - 84px)",left:"0",width:"240px","overflow-y":"auto","overflow-x":"hidden"},router:!0,"unique-opened":!0},{default:n(()=>[t[0]||(t[0]=m("div",{class:"menu-title"},"讲师体系",-1)),(i(!0),h(A,null,D(l.value,_=>(i(),x(d,{key:_.id,index:_.path},{default:n(()=>[o(r,null,{default:n(()=>[(i(),x(E(f(_.icon))))]),_:2},1024),m("span",null,H(_.title),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])])}}}),j=b($,[["__scopeId","data-v-92efa3e5"]]),q={class:"common-layout"},G={class:"page-container"},K={class:"loading-container"},O=M({__name:"InstructorMain",setup(k){return(p,a)=>{const c=s("el-aside"),u=s("RouterView"),f=s("el-skeleton"),v=s("el-main"),l=s("el-container");return i(),h("div",q,[o(l,{direction:"vertical",style:{height:"100vh"}},{default:n(()=>[o(S),o(l,{style:{"margin-top":"84px"}},{default:n(()=>[o(c,{width:"240px"},{default:n(()=>[o(j)]),_:1}),o(l,null,{default:n(()=>[o(v,null,{default:n(()=>[m("div",G,[(i(),x(N,null,{default:n(()=>[o(u)]),fallback:n(()=>[m("div",K,[o(f,{rows:3,animated:""})])]),_:1}))])]),_:1})]),_:1})]),_:1})]),_:1})])}}}),Y=b(O,[["__scopeId","data-v-a6ac1a95"]]);export{Y as default};
