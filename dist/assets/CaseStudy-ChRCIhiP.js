import{E as m,m as I}from"./elementPlus-7n3J9xVR.js";import{x as R,r as t,ax as A,j as D,G as M,H as n,ag as _,P as d,A as g,M as y,u as E,ay as L,z as T}from"./vendor-kUynFKsh.js";import{D as V}from"./DynamicForm-4dhAJHeS.js";import{s as W}from"./index-BKDCXq68.js";import"./testResultService-DDMXNt9x.js";import"./supabase-Dk90AXsH.js";const j={class:"subtitle"},J=R({__name:"CaseStudy",setup(z){var c,u,i,l,p;const s=t([]),e=A(),r=L(),f=t(e.query.score_weight?Number(e.query.score_weight):100),h=t(((c=e.query.testId)==null?void 0:c.toString())||"case-study-test"),v=t(((u=e.query.testName)==null?void 0:u.toString())||"未命名测试"),q=t((i=e.query.platform)==null?void 0:i.toString()),w=t((l=e.query.chapter)==null?void 0:l.toString()),x=t(((p=e.query.type)==null?void 0:p.toString())||"case"),b=()=>{r.back()},S=async()=>{const{data:a,error:o}=await W.rpc("get_limited_google_questions",{p_question_type:"reading",p_platform:q.value,p_chapter:w.value});o?m.error(`获取问题时出错:${o}, 请检查网络连接或联系管理员`):(s.value=a,console.log(s.value))};D(()=>{S()});const k=async a=>{console.log("用户答案:",a.answers),m.success("提交成功!"),setTimeout(()=>{r.back()},1500)},N=()=>{setTimeout(()=>{r.back()},1500)};return(a,o)=>{const B=_("el-page-header"),C=_("el-card");return T(),M(C,{style:{"min-height":"400px","margin-top":"30px",padding:"0 20px"}},{default:n(()=>[d(B,{onBack:b,icon:E(I)},{content:n(()=>o[0]||(o[0]=[g("span",{class:"text-large font-600 mr-3"}," 案例分析题 ",-1)])),default:n(()=>[g("div",j,"共"+y(s.value.length)+"道案例分析题，每题10分，满分"+y(s.value.length*10)+"分。",1)]),_:1},8,["icon"]),d(V,{questions:s.value,scoreWeight:f.value,testId:h.value,testName:v.value,type:x.value,onSubmitAnswers:k,onLimitReached:N},null,8,["questions","scoreWeight","testId","testName","type"])]),_:1})}}});export{J as default};
