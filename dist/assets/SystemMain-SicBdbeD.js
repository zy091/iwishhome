import{d as S,u as H,r as i,o as N,c as u,w as e,a as t,b as n,e as _,f as y,t as h,g as F,h as L,i as R,j as l,_ as A,k as q,l as w,F as b,m as B,n as U,S as E}from"./index-DCqMzgSt.js";const T={class:"toolbar",style:{display:"flex","justify-content":"end","align-items":"center"}},W={style:{display:"inline-block",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","margin-right":"5px"}},G=S({__name:"Header",setup(M){const p=R(),r=H(),s=i(r.user);console.log(s.value,"user"),i(""),N(()=>{s.value=r.getUser()});const d=()=>{r.logout(),p.push("/login")};return(f,a)=>{const c=n("el-col"),$=n("el-avatar"),g=n("el-icon"),v=n("el-link"),x=n("el-dropdown-item"),k=n("el-dropdown-menu"),o=n("el-dropdown"),m=n("el-row"),D=n("el-header");return l(),u(D,{style:{"font-size":"16px"}},{default:e(()=>[t(m,{justify:"space-between",gutter:16,style:{height:"100%","align-items":"center"}},{default:e(()=>[t(c,{span:3},{default:e(()=>a[0]||(a[0]=[_("h1",{style:{"font-size":"40px","font-weight":"700"}},"IWISH",-1)])),_:1}),t(c,{span:4},{default:e(()=>{var C,z;return[_("div",T,[t($,{style:{"margin-right":"10px","min-width":"40px","font-size":"20px","font-weight":"700","align-items":"center","line-height":"40px","justify-content":"center",background:"#2f87ff"},src:(C=s.value)==null?void 0:C.avatar_url},{default:e(()=>{var I,V,j;return[y(h(((j=(V=(I=s.value)==null?void 0:I.full_name)==null?void 0:V.charAt(0))==null?void 0:j.toUpperCase())||"U"),1)]}),_:1},8,["src"]),_("span",W,h((z=s.value)==null?void 0:z.full_name),1),t(o,null,{dropdown:e(()=>[t(k,null,{default:e(()=>[t(x,null,{default:e(()=>[t(v,{href:"/system/personal-data"},{default:e(()=>a[1]||(a[1]=[y(" 个人中心")])),_:1})]),_:1}),t(x,{onClick:d},{default:e(()=>a[2]||(a[2]=[y("退出登录")])),_:1})]),_:1})]),default:e(()=>[t(g,{style:{"margin-right":"10px","margin-top":"1px","font-size":"18px",color:"#fff"}},{default:e(()=>[t(F(L))]),_:1})]),_:1})])]}),_:1})]),_:1})]),_:1})}}}),J=A(G,[["__scopeId","data-v-8f6d8bf3"]]),K=S({__name:"Aside",setup(M){R();const p=i(""),r=i([]),s=i(!1),d=H(),f=q(()=>d.getMenus);N(async()=>{s.value=!0,await d.fetchMenus(),s.value=!1,console.log(f.value,"aside menus")});const a=c=>{p.value=c};return(c,$)=>{const g=n("el-icon"),v=n("el-menu-item"),x=n("el-sub-menu"),k=n("el-menu");return l(),u(k,{class:"el-menu-vertical-demo","active-text-color":"#fff","background-color":"#05479a","text-color":"#fff",style:{position:"fixed","z-index":"999",height:"calc(100vh - 84px)",left:"0",width:"240px"},router:!0,"unique-opened":!0,"default-active":p.value,"default-openeds":r.value,onSelect:a,loading:s.value},{default:e(()=>[(l(!0),w(b,null,B(f.value,o=>(l(),w(b,{key:o.id},[o.children&&o.children.length>0?(l(),u(x,{key:0,index:`/system${o.path}`},{title:e(()=>[t(g,null,{default:e(()=>[(l(),u(U(o.icon)))]),_:2},1024),_("span",null,h(o.name),1)]),default:e(()=>[(l(!0),w(b,null,B(o.children,m=>(l(),u(v,{key:m.id,index:`/system${m.path}`},{default:e(()=>[y(h(m.name),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(l(),u(v,{key:1,index:`/system${o.path}`},{default:e(()=>[t(g,null,{default:e(()=>[(l(),u(U(o.icon)))]),_:2},1024),_("span",null,h(o.name),1)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active","default-openeds","loading"])}}}),O={class:"common-layout"},P={class:"page-container"},Q={class:"loading-container"},X=S({__name:"SystemMain",setup(M){return i([]),(p,r)=>{const s=n("el-aside"),d=n("RouterView"),f=n("el-skeleton"),a=n("el-main"),c=n("el-container");return l(),w("div",O,[t(c,{direction:"vertical",style:{height:"100vh"}},{default:e(()=>[t(J),t(c,{style:{"margin-top":"84px"}},{default:e(()=>[t(s,{width:"240px"},{default:e(()=>[t(K)]),_:1}),t(c,null,{default:e(()=>[t(a,null,{default:e(()=>[_("div",P,[(l(),u(E,null,{default:e(()=>[t(d)]),fallback:e(()=>[_("div",Q,[t(f,{rows:3,animated:""})])]),_:1}))])]),_:1})]),_:1})]),_:1})]),_:1})])}}}),Z=A(X,[["__scopeId","data-v-f490535e"]]);export{Z as default};
