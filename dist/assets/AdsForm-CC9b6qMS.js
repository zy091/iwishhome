import{x as B,c as V,ax as x,r as m,w as C,j as N,y as r,a6 as f,O as d,ag as y,z as o,J as w,P as p,A as v,M as D,H as E,G}from"./vendor-kUynFKsh.js";import{s as k,B as L,b as M}from"./index-t-_HdCcH.js";import{W as T}from"./WordDocumentViewer-RFvQd-fM.js";import"./elementPlus-7n3J9xVR.js";import"./supabase-Dk90AXsH.js";import"./index-BBl8hZ3Q.js";const W={key:0,class:"search-ads"},j={class:"search-ads-title"},q={class:"title"},z={class:"search-ads-content"},H={key:0},I=B({__name:"AdsForm",setup(J){const A=x(),l=V(()=>{const a=A.query.adsForm;return Array.isArray(a)?a[0]:a});console.log(l.value,"adsFormName");const c=m("principle"),b=m(!1),n=m([]),i=m([]),F=async()=>{b.value=!0;try{const{data:a,error:s}=await k.from("ad_formats").select("*").order("created_at",{ascending:!1});if(s)throw s;const{data:_,error:u}=await k.from("ad_courses").select("*").order("created_at",{ascending:!0});if(u)throw u;n.value=a.map(t=>({id:t.id,title:t.title,adsform:t.adsform,tabs:_.filter(e=>e.ad_format_id===t.id).map(e=>({id:e.id,label:e.label,name:e.name,document_url:e.document_url}))})),console.log(n.value,"adsFormList"),h(),g()}catch(a){console.error("获取广告数据失败:",a)}finally{b.value=!1}},h=()=>{const a=n.value.find(s=>s.adsform===l.value);a?i.value=[{name:"Google广告形式学习",path:"/system/google-ads"},{name:a.title,path:`/system/google-search-ads?adsForm=${a.adsform}`}]:i.value=[{name:"Google广告形式学习",path:"/system/google-ads"},{name:"广告学习",path:"/system/google-search-ads"}]},g=()=>{const a=n.value.find(s=>s.adsform===l.value);a&&a.tabs.length>0&&(c.value=a.tabs[0].name)};return C(l,()=>{h(),g()}),N(()=>{F()}),(a,s)=>{const _=y("el-tab-pane"),u=y("el-tabs");return o(!0),r(d,null,f(n.value,t=>(o(),r(d,{key:t.id},[t.adsform===l.value?(o(),r("div",W,[p(L,{breadcrumb:i.value},null,8,["breadcrumb"]),v("div",j,[v("h1",q,D(t.title),1)]),p(u,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),class:"demo-tabs"},{default:E(()=>[(o(!0),r(d,null,f(t.tabs,e=>(o(),G(_,{label:e.label,name:e.name,key:e.name},null,8,["label","name"]))),128))]),_:2},1032,["modelValue"]),v("div",z,[(o(!0),r(d,null,f(t.tabs,e=>(o(),r(d,{key:e.name},[c.value===e.name?(o(),r("div",H,[p(T,{"document-url":e.document_url,title:e.label,"show-back-button":!1,"show-download-button":!1},null,8,["document-url","title"])])):w("",!0)],64))),128))])])):w("",!0)],64))),128)}}}),K=M(I,[["__scopeId","data-v-95c4212f"]]);export{K as default};
