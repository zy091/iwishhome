import{E as m,k as C}from"./elementPlus-Dv7g5dxn.js";import{x as I,r as e,aF as R,j as A,G as D,H as r,ag as d,P as _,A as g,M as f,u as M,az as z,z as E}from"./vendor-COQJj1AX.js";import{D as F}from"./DynamicForm-3yYIt4GW.js";import{s as L}from"./index-BlOdscL-.js";import"./testResultService-BGSV1fM3.js";import"./supabase-Bqqw4QDB.js";const T={class:"subtitle"},J=I({__name:"CaseStudy",setup(V){var c,u,i,l,p;const t=e([]),s=R(),n=z(),y=e(((c=s.query.testId)==null?void 0:c.toString())||"case-study-test"),h=e(((u=s.query.testName)==null?void 0:u.toString())||"未命名测试"),v=e((i=s.query.platform)==null?void 0:i.toString()),q=e((l=s.query.chapter)==null?void 0:l.toString()),k=e(((p=s.query.type)==null?void 0:p.toString())||"case"),x=()=>{n.back()},S=async()=>{const{data:a,error:o}=await L.rpc("get_limited_google_questions",{p_question_type:"reading",p_platform:v.value,p_chapter:q.value});o?m.error(`获取问题时出错:${o}, 请检查网络连接或联系管理员`):(t.value=a,console.log(t.value))};A(()=>{S()});const b=async a=>{console.log("用户答案:",a.answers),m.success("提交成功!"),setTimeout(()=>{n.back()},1500)},w=()=>{setTimeout(()=>{n.back()},1500)};return(a,o)=>{const N=d("el-page-header"),B=d("el-card");return E(),D(B,{style:{"min-height":"400px","margin-top":"30px",padding:"0 20px"}},{default:r(()=>[_(N,{onBack:x,icon:M(C)},{content:r(()=>o[0]||(o[0]=[g("span",{class:"text-large font-600 mr-3"}," 案例分析题 ",-1)])),default:r(()=>[g("div",T,"共"+f(t.value.length)+"道案例分析题，每题10分，满分"+f(t.value.length*10)+"分。",1)]),_:1},8,["icon"]),_(F,{questions:t.value,testId:y.value,testName:h.value,type:k.value,onSubmitAnswers:b,onLimitReached:w},null,8,["questions","testId","testName","type"])]),_:1})}}});export{J as default};
