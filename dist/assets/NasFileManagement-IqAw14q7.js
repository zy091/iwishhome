var Ke=Object.defineProperty;var qe=(R,m,v)=>m in R?Ke(R,m,{enumerable:!0,configurable:!0,writable:!0,value:v}):R[m]=v;var Z=(R,m,v)=>qe(R,typeof m!="symbol"?m+"":m,v);import{E as _,n as He,p as ce,f as _e,v as Ye,o as Qe,c as be}from"./elementPlus-COdCHMXA.js";import{B as Xe,b as Ze}from"./index-BTZmLT2e.js";import{x as et,r as h,j as tt,w as lt,y as D,P as a,A as i,H as l,ag as b,L as s,M as g,I as at,aq as ot,G as k,u as z,D as we,J as w,O as ke,a6 as Ce,z as u}from"./vendor-kUynFKsh.js";import"./supabase-Bu12BySZ.js";class st{constructor(){Z(this,"webdavUrl");Z(this,"username");Z(this,"password");Z(this,"basePath");this.webdavUrl="http://192.168.1.27:5005",this.username="zy_iwish",this.password="199999zY",this.basePath="/public/"}setBasePath(m){this.basePath=m}getBasePath(){return this.basePath}async uploadFile(m,v){const p=`${this.webdavUrl}${this.basePath}${v}`;try{const f=await fetch(p,{method:"PUT",headers:{Authorization:`Basic ${btoa(`${this.username}:${this.password}`)}`,"Content-Type":m.type,"Content-Length":m.size.toString()},body:m});if(f.ok)return{success:!0,url:p,path:v};{const V=await f.text();throw console.error("服务器响应错误:",V),new Error(`Upload failed: ${f.status} - ${V}`)}}catch(f){return{success:!1,error:f instanceof Error?f.message:"Unknown error"}}}async downloadFile(m){const v=`${this.webdavUrl}${this.basePath}${m}`;try{const p=await fetch(v,{method:"GET",headers:{Authorization:`Basic ${btoa(`${this.username}:${this.password}`)}`}});if(p.ok)return await p.blob();throw new Error(`Download failed: ${p.status}`)}catch(p){throw console.error("Download error:",p),p}}async getFileList(m=""){const v=`${this.webdavUrl}${this.basePath}${m}`;try{const p=await fetch(v,{method:"PROPFIND",headers:{Authorization:`Basic ${btoa(`${this.username}:${this.password}`)}`,Depth:"1","Content-Type":"application/xml"},body:`<?xml version="1.0" encoding="utf-8"?>
<propfind xmlns="DAV:">
    <prop>
        <resourcetype/>
        <getcontentlength/>
        <getlastmodified/>
    </prop>
</propfind>`});if(p.ok){const f=await p.text();return this.parseWebDAVResponse(f)}else throw new Error(`Failed to get file list: ${p.status}`)}catch(p){throw console.error("Get file list error:",p),p}}parseWebDAVResponse(m){var p,f;const v=[];try{const I=new DOMParser().parseFromString(m,"text/xml").getElementsByTagName("D:response");for(let B=0;B<I.length;B++){const T=I[B],d=((p=T.getElementsByTagName("D:href")[0])==null?void 0:p.textContent)||"";if(d===this.basePath||d===this.basePath.slice(0,-1)||d==="/public/")continue;const C=d.split("/"),L=C[C.length-1]||"";if(!L)continue;let A=0,O="",r=!1;const j=T.getElementsByTagName("D:propstat");for(let U=0;U<j.length;U++){const K=j[U];if((((f=K.getElementsByTagName("D:status")[0])==null?void 0:f.textContent)||"").includes("200 OK")){const M=K.getElementsByTagName("D:prop")[0];if(M){const G=M.getElementsByTagName("D:resourcetype")[0];G&&G.children.length>0&&(r=!0);const Y=M.getElementsByTagName("D:getcontentlength")[0];Y&&Y.textContent&&(A=parseInt(Y.textContent)||0);const F=M.getElementsByTagName("D:getlastmodified")[0];F&&F.textContent&&(O=F.textContent)}}}d.endsWith("/")&&(r=!0),v.push({name:L,path:d,size:A,type:r?"directory":"file",modified:O,isDirectory:r})}}catch(V){console.error("Parse WebDAV response error:",V)}return v}async deleteFile(m){const v=`${this.webdavUrl}${this.basePath}${m}`;try{return(await fetch(v,{method:"DELETE",headers:{Authorization:`Basic ${btoa(`${this.username}:${this.password}`)}`}})).ok}catch(p){return console.error("Delete file error:",p),!1}}}const nt={class:"layout"},rt={class:"layout-title"},it={class:"status-tabs"},ut={class:"folder-selector"},ct={class:"current-folder-info"},dt={class:"card-header"},pt={class:"path-navigation"},ft={class:"path-label"},vt={key:0,class:"path-label"},mt={class:"header-actions"},gt={class:"file-stats"},ht={class:"file-list-content"},yt={class:"file-name"},_t=["onClick"],bt={key:0},wt={key:1},kt={class:"image-preview-content"},Ct={class:"image-slot"},Ft={class:"image-slot"},Dt={key:1,class:"image-info"},$t={class:"dialog-footer"},Pt={class:"pdf-preview-content"},xt=["src"],Vt={key:1,class:"file-info"},Bt={class:"dialog-footer"},Et={class:"video-preview-content"},Ut=["src"],Nt={key:1,class:"file-info"},Tt={class:"dialog-footer"},Lt={class:"upload-content"},At={key:0,class:"upload-actions"},Mt={key:1,class:"upload-progress"},St={class:"progress-info"},zt={class:"filename"},Rt={class:"status"},It={class:"dialog-footer"},Ot=et({__name:"NasFileManagement",setup(R){const m=[{name:"NAS文件管理",path:"/system/nas-files"}],v=h([]),p=h(!1),f=h([]),V=h(null),H=h([]),I=h(!1),B=h(null),T=h(null),d=h([]),C=h(""),L=h([]);h(!1),h(null);const A=h(!1),O=h(""),r=h(null),j=h(!1),U=h(!1),K=h(""),q=h(!1),M=h(""),G=h("/public/case-sharing/"),Y=[{path:"/public/case-sharing/",name:"知识分享"},{path:"/public/company-documents/",name:"公司文档"},{path:"/public/operation-materials/",name:"运营资料"},{path:"/public/temporary-storage/",name:"临时存储"},{path:"/public/video/",name:"视频文件"}],F=new st,Fe=(t,e)=>{v.value=e},De=async()=>{if(v.value.length===0){_.warning("请先选择要上传的文件");return}p.value=!0,f.value=[];try{for(let t=0;t<v.value.length;t++){const e=v.value[t].raw||v.value[t],n=e.name,ie=`${new Date().getTime()}_${n}`;f.value.push({filename:n,status:"uploading",percentage:0});try{const W=await F.uploadFile(e,ie);if(W.success){const $=f.value.findIndex(J=>J.filename===n);$!==-1&&(f.value[$].status="success",f.value[$].percentage=100)}else{const $=f.value.findIndex(J=>J.filename===n);$!==-1&&(f.value[$].status="error",f.value[$].percentage=0),_.error(`${E(n)} 上传失败: ${W.error}`)}}catch(W){const $=f.value.findIndex(J=>J.filename===n);$!==-1&&(f.value[$].status="error",f.value[$].percentage=0),_.error(`${E(n)} 上传失败: ${W}`)}}await N(),ye()}finally{p.value=!1}},de=()=>{v.value=[],f.value=[],V.value&&V.value.clearFiles()},N=async()=>{I.value=!0;try{const t=await F.getFileList(C.value);H.value=t,pe(),fe()}catch(t){console.error("获取文件列表失败:",t),_.error("获取文件列表失败")}finally{I.value=!1}},pe=()=>{const t=[{name:ee(),path:""}];if(C.value){const e=C.value.split("/").filter(c=>c);let n="";for(const c of e)n+=`/${c}`,t.push({name:c,path:n})}L.value=t},$e=t=>{try{const e=t.filter(n=>!n.isDirectory);d.value=e,B.value=e.length>0?e[0]:null}catch(e){console.error("处理文件选择变化失败:",e),d.value=[],B.value=null}},Pe=t=>{try{const e=t.filter(n=>!n.isDirectory);d.value=e,B.value=e.length>0?e[0]:null}catch(e){console.error("处理全选失败:",e),d.value=[],B.value=null}},xe=t=>!t.isDirectory,fe=()=>{d.value=[],B.value=null,T.value&&T.value.clearSelection()},Ve=async t=>{if(t<L.value.length-1){const e=L.value[t].path;C.value=e,await N()}},ve=async t=>{t.isDirectory&&(C.value=t.path,await N())},Be=async()=>{if(C.value){const t=C.value.split("/").filter(e=>e);t.length>0&&(t.pop(),C.value=t.length>0?`/${t.join("/")}`:"",await N())}},Ee=()=>H.value.filter(t=>!t.isDirectory).length,Ue=async t=>{F.setBasePath(t),C.value="",await N()},ee=()=>{const t=Y.find(e=>e.path===G.value);return t?t.name:"未知文件夹"},Ne=async()=>{if(d.value.length===0){_.warning("请先选择要下载的文件");return}try{for(const t of d.value)t.isDirectory||await Q(t);_.success(`成功下载 ${d.value.length} 个文件`)}catch(t){console.error("批量下载失败:",t),_.error("批量下载失败")}},Q=async t=>{if(!t.isDirectory)try{const e=await F.downloadFile(t.name),n=window.URL.createObjectURL(e),c=document.createElement("a");c.href=n,c.download=t.name,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(n)}catch(e){console.error("下载文件失败:",e),_.error("下载文件失败")}},Te=async()=>{if(d.value.length===0){_.warning("请先选择要删除的文件");return}try{await be.confirm(`确定要删除选中的 ${d.value.length} 个文件吗？此操作不可恢复。`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});let t=0;for(const e of d.value)e.isDirectory||await F.deleteFile(e.name)&&t++;_.success(`成功删除 ${t} 个文件`),N(),d.value=[],T.value&&T.value.clearSelection()}catch(t){t!=="cancel"&&(console.error("批量删除失败:",t),_.error("批量删除失败"))}},Le=async t=>{try{await be.confirm(`确定要删除文件 "${E(t.name)}" 吗？此操作不可恢复。`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await F.deleteFile(t.name)?N():_.error("文件删除失败")}catch(e){e!=="cancel"&&(console.error("删除文件失败:",e),_.error("删除文件失败"))}},te=t=>{if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB","TB"],c=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,c)).toFixed(2))+" "+n[c]},le=t=>{if(!t)return"-";try{return new Date(t).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return t}},E=t=>{try{return decodeURIComponent(t)}catch(e){return console.warn("文件名解码失败:",t,e),t}},ae=t=>{const e=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"],n=t.toLowerCase();return e.some(c=>n.endsWith(c))},oe=t=>t.toLowerCase().endsWith(".pdf"),se=t=>{const e=[".mp4",".avi",".mov",".wmv",".flv",".webm",".mkv",".m4v"],n=t.toLowerCase();return e.some(c=>n.endsWith(c))},me=async t=>{if(!t.isDirectory)try{r.value=t,A.value=!0;const e=await F.downloadFile(t.name),n=window.URL.createObjectURL(e);O.value=n}catch(e){console.error("预览图片失败:",e),_.error("预览图片失败")}},Ae=async()=>{if(r.value)try{await Q(r.value),A.value=!1}catch(t){console.error("下载预览图片失败:",t),_.error("下载预览图片失败")}},re=t=>{var c;const e=((c=t.split(".").pop())==null?void 0:c.toLowerCase())||"";return{jpg:"JPEG图像",jpeg:"JPEG图像",png:"PNG图像",gif:"GIF图像",bmp:"BMP图像",webp:"WebP图像",svg:"SVG矢量图",pdf:"PDF文档",mp4:"MP4视频",avi:"AVI视频",mov:"MOV视频",wmv:"WMV视频",flv:"FLV视频",webm:"WebM视频",mkv:"MKV视频",m4v:"M4V视频"}[e]||"未知类型"},Me=t=>{t.isDirectory?ve(t):ae(t.name)?me(t):oe(t.name)?ge(t):se(t.name)&&he(t)},ge=async t=>{if(!t.isDirectory)try{r.value=t,U.value=!0;const e=await F.downloadFile(t.name),n=window.URL.createObjectURL(e);K.value=n}catch(e){console.error("预览PDF失败:",e),_.error("预览PDF失败")}},he=async t=>{if(!t.isDirectory)try{r.value=t,q.value=!0;const e=await F.downloadFile(t.name),n=window.URL.createObjectURL(e);M.value=n}catch(e){console.error("预览视频失败:",e),_.error("预览视频失败")}},Se=async()=>{if(r.value)try{await Q(r.value),U.value=!1}catch(t){console.error("下载预览PDF失败:",t),_.error("下载预览PDF失败")}},ze=async()=>{if(r.value)try{await Q(r.value),q.value=!1}catch(t){console.error("下载预览视频失败:",t),_.error("下载预览视频失败")}},Re=()=>{j.value=!0},ye=()=>{j.value=!1,de()};return tt(()=>{F.setBasePath(G.value),N(),pe()}),lt(H,t=>{if(d.value.length>0){const e=d.value.filter(n=>t.some(c=>c.name===n.name));e.length!==d.value.length&&(d.value=e,B.value=e.length>0?e[0]:null)}},{deep:!0}),(t,e)=>{const n=b("el-tag"),c=b("el-radio-button"),ie=b("el-radio-group"),W=b("el-card"),$=b("el-breadcrumb-item"),J=b("el-breadcrumb"),y=b("el-button"),X=b("el-table-column"),S=b("el-icon"),Ie=b("el-button-group"),Oe=b("el-table"),je=b("el-image"),P=b("el-descriptions-item"),ue=b("el-descriptions"),ne=b("el-dialog"),Ge=b("el-upload"),We=b("el-progress"),Je=ot("loading");return u(),D("div",nt,[a(Xe,{breadcrumb:m}),i("div",rt,[e[9]||(e[9]=i("h1",{class:"title"},"NAS文件管理",-1)),i("div",it,[a(n,{type:"success",size:"large"},{default:l(()=>e[8]||(e[8]=[s("UGREEN NAS")])),_:1})])]),a(W,{shadow:"always",style:{"margin-bottom":"20px"}},{header:l(()=>e[10]||(e[10]=[i("div",{class:"card-header"},[i("span",null,"选择存储文件夹")],-1)])),default:l(()=>[i("div",ut,[a(ie,{modelValue:G.value,"onUpdate:modelValue":e[0]||(e[0]=o=>G.value=o),onChange:Ue,size:"large"},{default:l(()=>[a(c,{value:"/public/case-sharing/"},{default:l(()=>e[11]||(e[11]=[s("知识分享")])),_:1}),a(c,{value:"/public/company-documents/"},{default:l(()=>e[12]||(e[12]=[s("公司文档")])),_:1}),a(c,{value:"/public/operation-materials/"},{default:l(()=>e[13]||(e[13]=[s("运营资料")])),_:1}),a(c,{value:"/public/temporary-storage/"},{default:l(()=>e[14]||(e[14]=[s("临时存储")])),_:1}),a(c,{value:"/public/video/"},{default:l(()=>e[15]||(e[15]=[s("视频文件")])),_:1})]),_:1},8,["modelValue"]),i("div",ct,[a(n,{type:"info",size:"large"},{default:l(()=>[s(" 当前选择："+g(ee()),1)]),_:1})])])]),_:1}),a(W,{shadow:"always",style:{"min-height":"400px"}},{header:l(()=>[i("div",dt,[i("div",pt,[i("span",ft,"当前文件夹："+g(ee()),1),C.value?(u(),D("span",vt," | 当前路径：")):w("",!0),C.value?(u(),k(J,{key:1,separator:"/"},{default:l(()=>[(u(!0),D(ke,null,Ce(L.value,(o,x)=>(u(),k($,{key:x,onClick:jt=>Ve(x),class:we({clickable:x<L.value.length-1})},{default:l(()=>[s(g(o.name),1)]),_:2},1032,["onClick","class"]))),128))]),_:1})):w("",!0)]),i("div",mt,[i("div",gt,[a(n,{type:"success"},{default:l(()=>[s(" 文件: "+g(Ee()),1)]),_:1})]),C.value?(u(),k(y,{key:0,type:"warning",onClick:Be},{default:l(()=>e[16]||(e[16]=[s(" 返回上级 ")])),_:1})):w("",!0),a(y,{type:"primary",onClick:N,loading:I.value},{default:l(()=>e[17]||(e[17]=[s(" 刷新列表 ")])),_:1},8,["loading"]),a(y,{type:"success",onClick:Ne,disabled:d.value.length===0},{default:l(()=>[s(" 下载文件 ("+g(d.value.length)+") ",1)]),_:1},8,["disabled"]),a(y,{type:"danger",onClick:Te,disabled:d.value.length===0},{default:l(()=>[s(" 删除文件 ("+g(d.value.length)+") ",1)]),_:1},8,["disabled"]),a(y,{type:"info",onClick:fe,disabled:d.value.length===0},{default:l(()=>e[18]||(e[18]=[s(" 清空选择 ")])),_:1},8,["disabled"]),a(y,{type:"primary",onClick:Re},{default:l(()=>e[19]||(e[19]=[s(" 上传文件 ")])),_:1})])])]),default:l(()=>[i("div",ht,[at((u(),k(Oe,{data:H.value,onSelectionChange:$e,onSelectAll:Pe,ref_key:"fileTableRef",ref:T,style:{width:"100%"},height:"500"},{default:l(()=>[a(X,{type:"selection",width:"55",selectable:xe}),a(X,{prop:"name",label:"文件名","min-width":"250"},{default:l(({row:o})=>[i("div",yt,[o.isDirectory?(u(),k(S,{key:0,color:"#409EFF"},{default:l(()=>[a(z(He))]),_:1})):ae(o.name)?(u(),k(S,{key:1,color:"#E6A23C"},{default:l(()=>[a(z(ce))]),_:1})):oe(o.name)?(u(),k(S,{key:2,color:"#F56C6C"},{default:l(()=>[a(z(_e))]),_:1})):se(o.name)?(u(),k(S,{key:3,color:"#E6A23C"},{default:l(()=>[a(z(Ye))]),_:1})):(u(),k(S,{key:4,color:"#67C23A"},{default:l(()=>[a(z(_e))]),_:1})),i("span",{class:we({"image-filename":ae(o.name),"pdf-filename":oe(o.name),"video-filename":se(o.name),"folder-name":o.isDirectory}),onClick:x=>Me(o)},g(E(o.name)),11,_t)])]),_:1}),a(X,{prop:"size",label:"大小",width:"120"},{default:l(({row:o})=>[o.isDirectory?(u(),D("span",wt,"-")):(u(),D("span",bt,g(te(o.size)),1))]),_:1}),a(X,{prop:"modified",label:"修改时间",width:"180"},{default:l(({row:o})=>[s(g(le(o.modified)),1)]),_:1}),a(X,{label:"操作",width:"",fixed:"right"},{default:l(({row:o})=>[a(Ie,null,{default:l(()=>[o.isDirectory?(u(),k(y,{key:0,type:"success",onClick:x=>ve(o)},{default:l(()=>e[20]||(e[20]=[s(" 进入 ")])),_:2},1032,["onClick"])):w("",!0),!o.isDirectory&&ae(o.name)?(u(),k(y,{key:1,type:"info",onClick:x=>me(o)},{default:l(()=>e[21]||(e[21]=[s(" 预览 ")])),_:2},1032,["onClick"])):w("",!0),!o.isDirectory&&oe(o.name)?(u(),k(y,{key:2,type:"warning",onClick:x=>ge(o)},{default:l(()=>e[22]||(e[22]=[s(" 预览 ")])),_:2},1032,["onClick"])):w("",!0),!o.isDirectory&&se(o.name)?(u(),k(y,{key:3,type:"success",onClick:x=>he(o)},{default:l(()=>e[23]||(e[23]=[s(" 预览 ")])),_:2},1032,["onClick"])):w("",!0),o.isDirectory?w("",!0):(u(),k(y,{key:4,type:"primary",onClick:x=>Q(o)},{default:l(()=>e[24]||(e[24]=[s(" 下载 ")])),_:2},1032,["onClick"])),a(y,{type:"danger",onClick:x=>Le(o)},{default:l(()=>e[25]||(e[25]=[s(" 删除 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Je,I.value]])])]),_:1}),a(ne,{modelValue:A.value,"onUpdate:modelValue":e[2]||(e[2]=o=>A.value=o),title:`图片预览 - ${r.value?E(r.value.name):""}`,width:"80%","close-on-click-modal":!0,top:"5vh",class:"image-preview-dialog"},{footer:l(()=>[i("span",$t,[a(y,{onClick:e[1]||(e[1]=o=>A.value=!1)},{default:l(()=>e[28]||(e[28]=[s("关闭")])),_:1}),a(y,{type:"primary",onClick:Ae},{default:l(()=>e[29]||(e[29]=[s("下载图片")])),_:1})])]),default:l(()=>[i("div",kt,[O.value?(u(),k(je,{key:0,src:O.value,"preview-src-list":[O.value],fit:"contain",style:{width:"100%",height:"500px"}},{placeholder:l(()=>[i("div",Ct,[a(S,null,{default:l(()=>[a(z(ce))]),_:1}),e[26]||(e[26]=i("span",null,"加载中...",-1))])]),error:l(()=>[i("div",Ft,[a(S,null,{default:l(()=>[a(z(ce))]),_:1}),e[27]||(e[27]=i("span",null,"加载失败",-1))])]),_:1},8,["src","preview-src-list"])):w("",!0),r.value?(u(),D("div",Dt,[a(ue,{column:2,border:""},{default:l(()=>[a(P,{label:"文件名"},{default:l(()=>[s(g(E(r.value.name)),1)]),_:1}),a(P,{label:"文件大小"},{default:l(()=>[s(g(te(r.value.size)),1)]),_:1}),a(P,{label:"修改时间"},{default:l(()=>[s(g(le(r.value.modified)),1)]),_:1}),a(P,{label:"文件类型"},{default:l(()=>[s(g(re(r.value.name)),1)]),_:1})]),_:1})])):w("",!0)])]),_:1},8,["modelValue","title"]),a(ne,{modelValue:U.value,"onUpdate:modelValue":e[4]||(e[4]=o=>U.value=o),title:`PDF预览 - ${r.value?E(r.value.name):""}`,width:"90%","close-on-click-modal":!0,top:"3vh",class:"pdf-preview-dialog"},{footer:l(()=>[i("span",Bt,[a(y,{onClick:e[3]||(e[3]=o=>U.value=!1)},{default:l(()=>e[30]||(e[30]=[s("关闭")])),_:1}),a(y,{type:"primary",onClick:Se},{default:l(()=>e[31]||(e[31]=[s("下载PDF")])),_:1})])]),default:l(()=>[i("div",Pt,[K.value?(u(),D("iframe",{key:0,src:K.value,style:{width:"100%",height:"600px",border:"none"},frameborder:"0"},null,8,xt)):w("",!0),r.value?(u(),D("div",Vt,[a(ue,{column:2,border:""},{default:l(()=>[a(P,{label:"文件名"},{default:l(()=>[s(g(E(r.value.name)),1)]),_:1}),a(P,{label:"文件大小"},{default:l(()=>[s(g(te(r.value.size)),1)]),_:1}),a(P,{label:"修改时间"},{default:l(()=>[s(g(le(r.value.modified)),1)]),_:1}),a(P,{label:"文件类型"},{default:l(()=>[s(g(re(r.value.name)),1)]),_:1})]),_:1})])):w("",!0)])]),_:1},8,["modelValue","title"]),a(ne,{modelValue:q.value,"onUpdate:modelValue":e[6]||(e[6]=o=>q.value=o),title:`视频预览 - ${r.value?E(r.value.name):""}`,width:"80%","close-on-click-modal":!0,top:"5vh",class:"video-preview-dialog"},{footer:l(()=>[i("span",Tt,[a(y,{onClick:e[5]||(e[5]=o=>q.value=!1)},{default:l(()=>e[32]||(e[32]=[s("关闭")])),_:1}),a(y,{type:"primary",onClick:ze},{default:l(()=>e[33]||(e[33]=[s("下载视频")])),_:1})])]),default:l(()=>[i("div",Et,[M.value?(u(),D("video",{key:0,src:M.value,controls:"",style:{width:"100%","max-height":"500px"},preload:"metadata"}," 您的浏览器不支持视频播放 ",8,Ut)):w("",!0),r.value?(u(),D("div",Nt,[a(ue,{column:2,border:""},{default:l(()=>[a(P,{label:"文件名"},{default:l(()=>[s(g(r.value.name),1)]),_:1}),a(P,{label:"文件大小"},{default:l(()=>[s(g(te(r.value.size)),1)]),_:1}),a(P,{label:"修改时间"},{default:l(()=>[s(g(le(r.value.modified)),1)]),_:1}),a(P,{label:"文件类型"},{default:l(()=>[s(g(re(r.value.name)),1)]),_:1})]),_:1})])):w("",!0)])]),_:1},8,["modelValue","title"]),a(ne,{modelValue:j.value,"onUpdate:modelValue":e[7]||(e[7]=o=>j.value=o),title:`上传文件到 ${ee()}`,width:"60%","close-on-click-modal":!1,top:"8vh",class:"upload-dialog"},{footer:l(()=>[i("span",It,[a(y,{onClick:ye},{default:l(()=>e[39]||(e[39]=[s("关闭")])),_:1})])]),default:l(()=>[i("div",Lt,[a(Ge,{class:"upload-demo",drag:"","auto-upload":!1,"on-change":Fe,"file-list":v.value,limit:10,multiple:"",ref_key:"uploadRef",ref:V},{tip:l(()=>e[34]||(e[34]=[i("div",{class:"el-upload__tip"}," 支持任意类型文件，文件将上传到UGREEN NAS存储 ",-1)])),default:l(()=>[a(S,{class:"el-icon--upload"},{default:l(()=>[a(z(Qe))]),_:1}),e[35]||(e[35]=i("div",{class:"el-upload__text"},[s(" 将文件拖到此处，或"),i("em",null,"点击上传")],-1))]),_:1},8,["file-list"]),v.value.length>0?(u(),D("div",At,[a(y,{type:"primary",onClick:De,loading:p.value},{default:l(()=>e[36]||(e[36]=[s(" 上传到NAS ")])),_:1},8,["loading"]),a(y,{onClick:de},{default:l(()=>e[37]||(e[37]=[s("清空文件")])),_:1})])):w("",!0),f.value.length>0?(u(),D("div",Mt,[e[38]||(e[38]=i("h4",null,"上传进度",-1)),(u(!0),D(ke,null,Ce(f.value,(o,x)=>(u(),D("div",{key:x,class:"progress-item"},[i("div",St,[i("span",zt,g(E(o.filename)),1),i("span",Rt,g(o.status),1)]),o.status==="uploading"?(u(),k(We,{key:0,percentage:o.percentage,status:o.percentage===100?"success":""},null,8,["percentage","status"])):w("",!0)]))),128))])):w("",!0)])]),_:1},8,["modelValue","title"])])}}}),Ht=Ze(Ot,[["__scopeId","data-v-9477804d"]]);export{Ht as default};
