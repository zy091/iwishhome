import{d as C,r as l,o as N,L as F,I as V,c as B,b,w as d,e as u,t as p,l as I,m as L,F as O,a as f,f as R,j as y,_ as U,H as j,s as z,M as H,g as Q,N as G,i as J}from"./index-BmUZ9zWv.js";import{D as K}from"./DynamicForm-DBtOnk5F.js";import"./testResultService-zRfHSjei.js";const P={style:{"margin-top":"10px","font-size":"13px",color:"#e30707"}},W={class:"dialog-footer"},X=C({__name:"ScoreDialog",props:{Score:{default:0},centerDialogVisible:{type:Boolean},incorrectAnswers:{}},emits:["update:centerDialogVisible"],setup(q,{emit:r}){const t=q,g=l(t.incorrectAnswers),n=l(t.centerDialogVisible);N(()=>{document.querySelector(".score-dialog p"),document.querySelector(".score-dialog h3"),n.value&&m(t.Score)});const m=o=>{F(()=>{const e=document.querySelector(".score-dialog p"),c=document.querySelector(".score-dialog h3");o>=100?(c.setAttribute("style","color: #67c23a"),e&&(e.setAttribute("style","color: #606266"),e.innerText="太棒了！你拿到了满分！")):(c.setAttribute("style","color: #606266"),e&&(e.setAttribute("style","color: #606266"),e.innerText="继续努力吧！"))})};V(()=>t.incorrectAnswers,o=>{g.value=o}),V(()=>t.Score,o=>{console.log(o),n.value&&m(t.Score)}),V(()=>t.centerDialogVisible,o=>{n.value=o});const S=r,_=()=>{n.value=!1,S("update:centerDialogVisible",n.value),console.log("props.centerDialogVisible:",t.centerDialogVisible,g.value)};return(o,e)=>{const c=b("el-button"),v=b("el-dialog");return y(),B(v,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),title:"你的测试成绩",width:"500","align-center":"",center:"",onClose:_,onOpen:e[1]||(e[1]=s=>m(o.Score)),class:"score-dialog"},{footer:d(()=>[u("div",W,[f(c,{type:"primary",onClick:_},{default:d(()=>e[2]||(e[2]=[R(" 确定 ")])),_:1})])]),default:d(()=>[u("h3",null,p(o.Score),1),e[3]||(e[3]=u("p",null,"Open the dialog from the center from the screen",-1)),u("ul",P,[(y(!0),I(O,null,L(g.value,s=>(y(),I("li",{style:{"list-style":"decimal"},key:s.questionId},p(s.questionIndex)+"错误，你的答案："+p(s.userAnswer)+"，正确答案："+p(s.correctAnswer),1))),128))])]),_:1},8,["modelValue"])}}}),Y=U(X,[["__scopeId","data-v-19dc1b55"]]),Z={class:"subtitle"},se=C({__name:"MultipleChoice",setup(q){var w,A,h,x,k;const r=l([]),t=j(),g=J(),n=l(((w=t.query.testId)==null?void 0:w.toString())||"multiple-choice-test"),m=l(((A=t.query.testName)==null?void 0:A.toString())||"未命名测试"),S=l((h=t.query.platform)==null?void 0:h.toString()),_=l((x=t.query.chapter)==null?void 0:x.toString()),o=l(((k=t.query.type)==null?void 0:k.toString())||"select"),e=()=>{g.back()},c=async()=>{const{data:i,error:a}=await z.rpc("get_limited_google_questions",{p_question_type:o.value=="case"?"reading":o.value,p_platform:S.value,p_chapter:_.value});a?H.error(`获取问题时出错:${a}, 请检查网络连接或联系管理员`):(r.value=i,console.log(r.value))};N(()=>{c()});const v=l(0),s=l(!1),D=l([]),T=async i=>{console.log("用户答案:",i.answers),v.value=i.score,D.value=i.incorrectAnswers,s.value=!0,console.log("得分:",v.value,s.value,D.value)};return(i,a)=>{const E=b("el-page-header"),M=b("el-card");return y(),B(M,{style:{"min-height":"400px","margin-top":"30px",padding:"0 20px"}},{default:d(()=>[f(E,{onBack:e,icon:Q(G)},{content:d(()=>a[1]||(a[1]=[u("span",{class:"text-large font-600 mr-3"}," 选择题 ",-1)])),default:d(()=>[u("div",Z,"共"+p(r.value.length)+"道选择题，每题10分，满分"+p(r.value.length*10)+"分。",1)]),_:1},8,["icon"]),f(K,{questions:r.value,testId:n.value,testName:m.value,type:o.value,onSubmitAnswers:T},null,8,["questions","testId","testName","type"]),f(Y,{Score:v.value,centerDialogVisible:s.value,incorrectAnswers:D.value,"onUpdate:centerDialogVisible":a[0]||(a[0]=$=>s.value=$)},null,8,["Score","centerDialogVisible","incorrectAnswers"])]),_:1})}}});export{se as default};
