import{x as V,c as y,ax as x,r as d,w as C,j as N,y as l,a6 as _,O as m,ag as w,z as o,J as k,P as p,A as v,M as D,H as G,G as E}from"./vendor-kUynFKsh.js";import{s as A,B as L,b as M}from"./index-BID3odBW.js";import{W as T}from"./WordDocumentViewer-CM2NaEej.js";import"./elementPlus-BSeP1oVM.js";import"./supabase-CBzAt1Op.js";import"./index-BKj5wUud.js";const W={key:0,class:"search-ads"},$={class:"search-ads-title"},j={class:"title"},q={class:"search-ads-content"},z={key:0},H=V({__name:"AdsForm",setup(I){const B=x(),n=y(()=>{const a=B.query.adsForm;return Array.isArray(a)?a[0]:a}),i=d("principle"),b=d(!1),c=d([]),f=d([]),F=async()=>{b.value=!0;try{const{data:a,error:s}=await A.from("ad_formats").select("*").order("created_at",{ascending:!1});if(s)throw s;const{data:u,error:r}=await A.from("ad_courses").select("*");if(r)throw r;c.value=a.map(t=>({id:t.id,title:t.title,adsform:t.adsform,tabs:u.filter(e=>e.ad_format_id===t.id).map(e=>({id:e.id,label:e.label,name:e.name,document_url:e.document_url}))})),console.log(c.value,"adsFormList"),h(),g()}catch(a){console.error("获取广告数据失败:",a)}finally{b.value=!1}},h=()=>{var r,t;const a=c.value.find(e=>e.adsform===n.value),s=d((t=(r=n.value)==null?void 0:r.split("-"))==null?void 0:t[0]),u=y(()=>{switch(s.value){case"google":return"Google";case"meta":return"Meta";default:return"Google"}});a?f.value=[{name:`${u.value}广告学习`,path:""},{name:a.title,path:`/system/google-search-ads?adsForm=${a.adsform}`}]:f.value=[{name:"Google广告学习",path:""},{name:"广告学习",path:"/system/google-search-ads"}]},g=()=>{const a=c.value.find(s=>s.adsform===n.value);a&&a.tabs.length>0&&(i.value=a.tabs[0].name)};return C(n,()=>{h(),g()}),N(()=>{F()}),(a,s)=>{const u=w("el-tab-pane"),r=w("el-tabs");return o(!0),l(m,null,_(c.value,t=>(o(),l(m,{key:t.id},[t.adsform===n.value?(o(),l("div",W,[p(L,{breadcrumb:f.value},null,8,["breadcrumb"]),v("div",$,[v("h1",j,D(t.title),1)]),p(r,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=e=>i.value=e),class:"demo-tabs"},{default:G(()=>[(o(!0),l(m,null,_(t.tabs,e=>(o(),E(u,{label:e.label,name:e.name,key:e.name},null,8,["label","name"]))),128))]),_:2},1032,["modelValue"]),v("div",q,[(o(!0),l(m,null,_(t.tabs,e=>(o(),l(m,{key:e.name},[i.value===e.name?(o(),l("div",z,[p(T,{"document-url":e.document_url,title:e.label,"show-back-button":!1,"show-download-button":!1},null,8,["document-url","title"])])):k("",!0)],64))),128))])])):k("",!0)],64))),128)}}}),K=M(H,[["__scopeId","data-v-6a9c1794"]]);export{K as default};
