import{E as m,m as A}from"./elementPlus-BUR7wieg.js";import{x as C,r as e,az as I,j as R,G as D,H as r,ag as d,P as _,A as g,M as f,u as M,aA as z,z as E}from"./vendor-CcmhhHhJ.js";import{D as L}from"./DynamicForm-CK-rTkE6.js";import{s as T}from"./index-Y63Xf8yq.js";import"./testResultService-DxYP1gY-.js";import"./supabase-CHaJ5Hcu.js";const V={class:"subtitle"},J=C({__name:"CaseStudy",setup(j){var c,u,i,l,p;const t=e([]),s=I(),n=z(),y=e(((c=s.query.testId)==null?void 0:c.toString())||"case-study-test"),h=e(((u=s.query.testName)==null?void 0:u.toString())||"未命名测试"),v=e((i=s.query.platform)==null?void 0:i.toString()),q=e((l=s.query.chapter)==null?void 0:l.toString()),x=e(((p=s.query.type)==null?void 0:p.toString())||"case"),S=()=>{n.back()},b=async()=>{const{data:a,error:o}=await T.rpc("get_limited_google_questions",{p_question_type:"reading",p_platform:v.value,p_chapter:q.value});o?m.error(`获取问题时出错:${o}, 请检查网络连接或联系管理员`):(t.value=a,console.log(t.value))};R(()=>{b()});const k=async a=>{console.log("用户答案:",a.answers),m.success("提交成功!"),setTimeout(()=>{n.back()},1500)},w=()=>{setTimeout(()=>{n.back()},1500)};return(a,o)=>{const N=d("el-page-header"),B=d("el-card");return E(),D(B,{style:{"min-height":"400px","margin-top":"30px",padding:"0 20px"}},{default:r(()=>[_(N,{onBack:S,icon:M(A)},{content:r(()=>o[0]||(o[0]=[g("span",{class:"text-large font-600 mr-3"}," 案例分析题 ",-1)])),default:r(()=>[g("div",V,"共"+f(t.value.length)+"道案例分析题，每题10分，满分"+f(t.value.length*10)+"分。",1)]),_:1},8,["icon"]),_(L,{questions:t.value,testId:y.value,testName:h.value,type:x.value,onSubmitAnswers:k,onLimitReached:w},null,8,["questions","testId","testName","type"])]),_:1})}}});export{J as default};
