import{x as K,r as u,j as L,y as v,A as l,I as O,G as M,J as S,P as t,H as n,ag as i,aq as Q,O as U,a6 as $,u as m,L as x,D as W,M as r,V as X,ay as Y,z as c}from"./vendor-kUynFKsh.js";import{s as Z,b as ee}from"./index-BID3odBW.js";import{E as te,s as q,e as ae,q as se,U as le,V as ne}from"./elementPlus-BSeP1oVM.js";import"./supabase-CBzAt1Op.js";const oe={class:"instructor-display"},ie={class:"filter-section"},re={class:"instructor-grid"},ce=["onClick"],ue={class:"card-header"},de=["src","alt"],_e={class:"card-body"},pe={class:"instructor-name"},ve={class:"instructor-title"},me={class:"specialties"},fe={class:"introduction"},ge={class:"stats"},he={class:"stat-item"},ye={class:"stat-item"},Ce={class:"stat-item"},be={class:"experience"},ke={class:"card-footer"},ze={key:1,class:"pagination"},Ve=K({__name:"InstructorDisplay",setup(we){const A=Y(),h=u(!1),b=u([]),f=u(""),y=u(""),g=u(1),d=u(12),k=u(0),C=async()=>{h.value=!0;try{let a=Z.from("instructors").select("*",{count:"exact"}).eq("is_active",!0).order("rating",{ascending:!1});f.value&&(a=a.or(`name.ilike.%${f.value}%,introduction.ilike.%${f.value}%`)),y.value&&(a=a.eq("department",y.value));const s=(g.value-1)*d.value,o=s+d.value-1;a=a.range(s,o);const{data:V,error:_,count:p}=await a;if(_)throw _;b.value=V||[],k.value=p||0}catch(a){te.error("获取讲师列表失败："+a.message)}finally{h.value=!1}},z=()=>{g.value=1,C()},E=a=>{d.value=a,C()},B=a=>{g.value=a,C()},D=a=>{A.push({name:"instructor-detail",params:{id:a}})},F=a=>{const s=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399"],o=a.charCodeAt(0)%s.length;return`https://ui-avatars.com/api/?name=${encodeURIComponent(a)}&background=${s[o].substring(1)}&color=fff&size=200`},N=(a,s)=>a?a.length>s?a.substring(0,s)+"...":a:"";return L(()=>{C()}),(a,s)=>{const o=i("el-icon"),V=i("el-input"),_=i("el-col"),p=i("el-option"),G=i("el-select"),I=i("el-button"),P=i("el-row"),j=i("el-tag"),R=i("el-empty"),T=i("el-pagination"),H=Q("loading");return c(),v("div",oe,[s[6]||(s[6]=l("div",{class:"page-header"},[l("h2",null,"讲师团队"),l("p",null,"优秀的讲师团队，为您提供专业的培训服务")],-1)),l("div",ie,[t(P,{gutter:20},{default:n(()=>[t(_,{span:8},{default:n(()=>[t(V,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=e=>f.value=e),placeholder:"搜索讲师姓名或专业领域",clearable:"",onClear:z},{prefix:n(()=>[t(o,null,{default:n(()=>[t(m(q))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(_,{span:6},{default:n(()=>[t(G,{modelValue:y.value,"onUpdate:modelValue":s[1]||(s[1]=e=>y.value=e),placeholder:"选择部门",clearable:"",onChange:z},{default:n(()=>[t(p,{label:"全部部门",value:""}),t(p,{label:"Google广告部",value:"Google广告部"}),t(p,{label:"Meta广告部",value:"Meta广告部"}),t(p,{label:"数字营销部",value:"数字营销部"})]),_:1},8,["modelValue"])]),_:1}),t(_,{span:4},{default:n(()=>[t(I,{type:"primary",onClick:z},{default:n(()=>[t(o,null,{default:n(()=>[t(m(q))]),_:1}),s[4]||(s[4]=x(" 搜索 "))]),_:1})]),_:1})]),_:1})]),O((c(),v("div",re,[(c(!0),v(U,null,$(b.value,e=>(c(),v("div",{key:e.id,class:"instructor-card",onClick:w=>D(e.id)},[l("div",ue,[l("img",{src:e.avatar_url||F(e.name),alt:e.name,class:"avatar"},null,8,de),l("div",{class:W(["status-badge",{active:e.is_active}])},r(e.is_active?"在职":"离职"),3)]),l("div",_e,[l("h3",pe,r(e.name),1),l("p",ve,r(e.title)+" · "+r(e.department),1),l("div",me,[(c(!0),v(U,null,$(e.specialties,(w,J)=>(c(),M(j,{key:J,size:"small",type:"info",effect:"plain"},{default:n(()=>[x(r(w),1)]),_:2},1024))),128))]),l("p",fe,r(N(e.introduction,80)),1),l("div",ge,[l("div",he,[t(o,null,{default:n(()=>[t(m(ae))]),_:1}),l("span",null,r(e.total_courses)+" 门课程",1)]),l("div",ye,[t(o,null,{default:n(()=>[t(m(se))]),_:1}),l("span",null,r(e.total_students)+" 学员",1)]),l("div",Ce,[t(o,null,{default:n(()=>[t(m(le))]),_:1}),l("span",null,r(e.rating)+" 分",1)])]),l("div",be,[t(o,null,{default:n(()=>[t(m(ne))]),_:1}),l("span",null,r(e.teaching_experience)+" 年教学经验",1)])]),l("div",ke,[t(I,{type:"primary",onClick:X(w=>D(e.id),["stop"])},{default:n(()=>s[5]||(s[5]=[x(" 查看详情 ")])),_:2},1032,["onClick"])])],8,ce))),128))])),[[H,h.value]]),!h.value&&b.value.length===0?(c(),M(R,{key:0,description:"暂无讲师数据"})):S("",!0),k.value>d.value?(c(),v("div",ze,[t(T,{"current-page":g.value,"onUpdate:currentPage":s[2]||(s[2]=e=>g.value=e),"page-size":d.value,"onUpdate:pageSize":s[3]||(s[3]=e=>d.value=e),"page-sizes":[12,24,48,96],total:k.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:E,onCurrentChange:B},null,8,["current-page","page-size","total"])])):S("",!0)])}}}),Se=ee(Ve,[["__scopeId","data-v-949ae52b"]]);export{Se as default};
