import{e as D}from"./elementPlus-Dv7g5dxn.js";import{u as U,_ as A}from"./index-BfpeTqGr.js";import{x as S,r as d,j as L,G as r,H as e,P as t,ag as n,A as u,L as y,M as h,u as E,az as N,z as l,c as q,y as w,O as b,a6 as B,K as H,aE as F}from"./vendor-COQJj1AX.js";import"./supabase-Bqqw4QDB.js";const G={class:"toolbar",style:{display:"flex","justify-content":"end","align-items":"center"}},K={style:{display:"inline-block",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","margin-right":"5px"}},O=S({__name:"Header",setup(M){const p=N(),_=U(),a=d(_.user);console.log(a.value,"user"),d(""),L(()=>{a.value=_.getUser()});const i=()=>{_.logout(),p.push("/login")};return(f,s)=>{const c=n("el-col"),z=n("el-avatar"),g=n("el-icon"),x=n("el-link"),v=n("el-dropdown-item"),k=n("el-dropdown-menu"),o=n("el-dropdown"),m=n("el-row"),R=n("el-header");return l(),r(R,{style:{"font-size":"16px"}},{default:e(()=>[t(m,{justify:"space-between",gutter:16,style:{height:"100%","align-items":"center"}},{default:e(()=>[t(c,{span:3},{default:e(()=>s[0]||(s[0]=[u("h1",{style:{"font-size":"40px","font-weight":"700"}},"IWISH",-1)])),_:1}),t(c,{span:4},{default:e(()=>{var $,C;return[u("div",G,[t(z,{style:{"margin-right":"10px","min-width":"40px","font-size":"20px","font-weight":"700","align-items":"center","line-height":"40px","justify-content":"center",background:"#2f87ff"},src:($=a.value)==null?void 0:$.avatar_url},{default:e(()=>{var I,V,j;return[y(h(((j=(V=(I=a.value)==null?void 0:I.full_name)==null?void 0:V.charAt(0))==null?void 0:j.toUpperCase())||"U"),1)]}),_:1},8,["src"]),u("span",K,h((C=a.value)==null?void 0:C.full_name),1),t(o,null,{dropdown:e(()=>[t(k,null,{default:e(()=>[t(v,null,{default:e(()=>[t(x,{href:"/system/personal-data"},{default:e(()=>s[1]||(s[1]=[y(" 个人中心")])),_:1})]),_:1}),t(v,{onClick:i},{default:e(()=>s[2]||(s[2]=[y("退出登录")])),_:1})]),_:1})]),default:e(()=>[t(g,{style:{"margin-right":"10px","margin-top":"1px","font-size":"18px",color:"#fff"}},{default:e(()=>[t(E(D))]),_:1})]),_:1})])]}),_:1})]),_:1})]),_:1})}}}),P=A(O,[["__scopeId","data-v-8f6d8bf3"]]),T=S({__name:"Aside",setup(M){N();const p=d(""),_=d([]),a=d(!1),i=U(),f=q(()=>i.getMenus);L(async()=>{a.value=!0,await i.fetchMenus(),a.value=!1,console.log(f.value,"aside menus")});const s=c=>{p.value=c};return(c,z)=>{const g=n("el-icon"),x=n("el-menu-item"),v=n("el-sub-menu"),k=n("el-menu");return l(),r(k,{class:"el-menu-vertical-demo","active-text-color":"#fff","background-color":"#05479a","text-color":"#fff",style:{position:"fixed","z-index":"999",height:"calc(100vh - 84px)",left:"0",width:"240px"},router:!0,"unique-opened":!0,"default-active":p.value,"default-openeds":_.value,onSelect:s,loading:a.value},{default:e(()=>[(l(!0),w(b,null,B(f.value,o=>(l(),w(b,{key:o.id},[o.children&&o.children.length>0?(l(),r(v,{key:0,index:`/system${o.path}`},{title:e(()=>[t(g,null,{default:e(()=>[(l(),r(H(o.icon)))]),_:2},1024),u("span",null,h(o.name),1)]),default:e(()=>[(l(!0),w(b,null,B(o.children,m=>(l(),r(x,{key:m.id,index:`/system${m.path}`},{default:e(()=>[y(h(m.name),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(l(),r(x,{key:1,index:`/system${o.path}`},{default:e(()=>[t(g,null,{default:e(()=>[(l(),r(H(o.icon)))]),_:2},1024),u("span",null,h(o.name),1)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active","default-openeds","loading"])}}}),W={class:"common-layout"},J={class:"page-container"},Q={class:"loading-container"},X=S({__name:"SystemMain",setup(M){return d([]),(p,_)=>{const a=n("el-aside"),i=n("RouterView"),f=n("el-skeleton"),s=n("el-main"),c=n("el-container");return l(),w("div",W,[t(c,{direction:"vertical",style:{height:"100vh"}},{default:e(()=>[t(P),t(c,{style:{"margin-top":"84px"}},{default:e(()=>[t(a,{width:"240px"},{default:e(()=>[t(T)]),_:1}),t(c,null,{default:e(()=>[t(s,null,{default:e(()=>[u("div",J,[(l(),r(F,null,{default:e(()=>[t(i)]),fallback:e(()=>[u("div",Q,[t(f,{rows:3,animated:""})])]),_:1}))])]),_:1})]),_:1})]),_:1})]),_:1})])}}}),ne=A(X,[["__scopeId","data-v-f490535e"]]);export{ne as default};
