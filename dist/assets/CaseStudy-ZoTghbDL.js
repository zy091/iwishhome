import{E as m,m as C}from"./elementPlus-Be5V1zcU.js";import{x as I,r as t,az as R,j as D,G as M,H as n,ag as _,P as d,A as g,M as f,u as z,aA as E,z as L}from"./vendor-CcmhhHhJ.js";import{D as T}from"./DynamicForm-pS2onWWE.js";import{s as V}from"./index-bysYXhlE.js";import"./testResultService-Dem0d1Ia.js";import"./supabase-fOlwtt9p.js";const W={class:"subtitle"},J=I({__name:"CaseStudy",setup(j){var c,u,i,l,p;const s=t([]),e=R(),r=E(),h=t(e.query.score_weight?Number(e.query.score_weight):100),y=t(((c=e.query.testId)==null?void 0:c.toString())||"case-study-test"),v=t(((u=e.query.testName)==null?void 0:u.toString())||"未命名测试"),q=t((i=e.query.platform)==null?void 0:i.toString()),w=t((l=e.query.chapter)==null?void 0:l.toString()),b=t(((p=e.query.type)==null?void 0:p.toString())||"case"),x=()=>{r.back()},S=async()=>{const{data:a,error:o}=await V.rpc("get_limited_google_questions",{p_question_type:"reading",p_platform:q.value,p_chapter:w.value});o?m.error(`获取问题时出错:${o}, 请检查网络连接或联系管理员`):(s.value=a,console.log(s.value))};D(()=>{S()});const k=async a=>{console.log("用户答案:",a.answers),m.success("提交成功!"),setTimeout(()=>{r.back()},1500)},N=()=>{setTimeout(()=>{r.back()},1500)};return(a,o)=>{const B=_("el-page-header"),A=_("el-card");return L(),M(A,{style:{"min-height":"400px","margin-top":"30px",padding:"0 20px"}},{default:n(()=>[d(B,{onBack:x,icon:z(C)},{content:n(()=>o[0]||(o[0]=[g("span",{class:"text-large font-600 mr-3"}," 案例分析题 ",-1)])),default:n(()=>[g("div",W,"共"+f(s.value.length)+"道案例分析题，每题10分，满分"+f(s.value.length*10)+"分。",1)]),_:1},8,["icon"]),d(T,{questions:s.value,scoreWeight:h.value,testId:y.value,testName:v.value,type:b.value,onSubmitAnswers:k,onLimitReached:N},null,8,["questions","scoreWeight","testId","testName","type"])]),_:1})}}});export{J as default};
