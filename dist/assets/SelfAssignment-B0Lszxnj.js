import{a as x}from"./assignmentService-DtVdMg68.js";import{d as b,u as w,r as c,c as y,w as l,b as n,a as r,f as V,e as S,M as m,j as k}from"./index-CF7jzyo9.js";const N=b({__name:"SelfAssignment",setup(C){const p=w(),f={title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]},o=c({title:"",content:""}),s=c(),_=async()=>{s.value&&await s.value.validate(async d=>{var e,a;if(d)try{const t=(e=p.user)==null?void 0:e.user_id;if(!t){m.error("用户未登录");return}const u={...o.value,assigned_to:t};await x.createAssignment(u),m.success("提交成功"),(a=s.value)==null||a.resetFields(),o.value={title:"",content:""}}catch(t){console.error("提交失败:",t),m.error("提交失败")}})};return(d,e)=>{const a=n("el-input"),t=n("el-form-item"),u=n("el-button"),g=n("el-form"),v=n("el-card");return k(),y(v,{style:{"min-height":"400px","margin-top":"30px"}},{header:l(()=>e[2]||(e[2]=[S("div",{class:"subtitle"},"添加个人作业",-1)])),default:l(()=>[r(g,{model:o.value,ref_key:"formRef",ref:s,rules:f,"label-width":"80px",style:{width:"100%","max-width":"800px","margin-top":"40px"}},{default:l(()=>[r(t,{label:"标题",prop:"title"},{default:l(()=>[r(a,{modelValue:o.value.title,"onUpdate:modelValue":e[0]||(e[0]=i=>o.value.title=i)},null,8,["modelValue"])]),_:1}),r(t,{label:"内容",prop:"content"},{default:l(()=>[r(a,{modelValue:o.value.content,"onUpdate:modelValue":e[1]||(e[1]=i=>o.value.content=i),type:"textarea",autosize:{minRows:10,maxRows:15}},null,8,["modelValue"])]),_:1}),r(t,null,{default:l(()=>[r(u,{type:"primary",onClick:_},{default:l(()=>e[3]||(e[3]=[V("提交")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}});export{N as default};
